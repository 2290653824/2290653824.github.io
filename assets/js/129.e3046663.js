(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{454:function(s,t,a){"use strict";a.r(t);var n=a(4),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-快速入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-快速入门"}},[s._v("#")]),s._v(" 一.快速入门")]),s._v(" "),t("p",[s._v("博客基于官方文档进行学习"),t("a",{attrs:{href:"https://www.xuxueli.com/xxl-job/",target:"_blank",rel:"noopener noreferrer"}},[s._v("XXL-JOB"),t("OutboundLink")],1)]),s._v(" "),t("ol",[t("li",[s._v("使用git拉取XXL-JOB项目："),t("a",{attrs:{href:"https://github.com/xuxueli/xxl-job",target:"_blank",rel:"noopener noreferrer"}},[s._v("git地址"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("拉取成功后，如下是项目的基本目录")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20221223234556415.png",alt:"image-20221223234556415"}})]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("因为XXL-JOB是基于mysql数据库实现的，所以我们要在相应的数据库中执行sql脚本。脚本所在位置为"),t("code",[s._v("/xxl-job/doc/db/tables_xxl_job.sql")]),s._v("。")])]),s._v(" "),t("p",[s._v("注意：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("调度中心支持集群部署，集群情况下各节点务必连接同一个mysql实例;")])]),s._v(" "),t("li",[t("p",[s._v("如果mysql做主从,调度中心集群节点务必"),t("strong",[s._v("强制走主库")]),s._v(";")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[s._v("配置部署调度中心")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("调度中心项目：xxl-job-admin")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("作用：统一管理任务调度平台上调度任务，负责触发调度执行，并且提供任务管理平台。")])])])]),s._v(" "),t("p",[s._v("以下是关键配置，省略了部分常见配置：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("### 调度中心"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JDBC")]),s._v("链接：链接地址请保持和 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("章节 所创建的调度数据库的地址一致\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datasource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jdbc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xxl_job"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("useUnicode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("characterEncoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UTF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("autoReconnect"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("serverTimezone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Asia")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Shanghai")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datasource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datasource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root_pwd\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datasource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jdbc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Driver")]),s._v("\n### 报警邮箱\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("qq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@qq.com")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("starttls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("starttls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("required"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nspring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("socketFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("javax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("SSLSocketFactory")]),s._v("\n### 调度中心通讯"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOKEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：非空时启用；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("accessToken"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n### 调度中心国际化配置 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("必填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("： 默认为 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("中文简体"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 可选范围为 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("中文简体"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_TC"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("中文繁体 and "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"en"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("英文；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("i18n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN\n## 调度线程池最大线程配置【必填】\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("triggerpool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("triggerpool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slow"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n### 调度中心日志表数据保存天数 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("必填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：过期日志自动清理；限制大于等于"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("时生效，否则"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 如"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("，关闭自动清理功能；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logretentiondays"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("启动项目admin（单体）")])]),s._v(" "),t("p",[s._v("在IDEA中使用maven启动即可，访问"),t("a",{attrs:{href:"http://localhost:8080/xxl-job-admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/xxl-job-admin"),t("OutboundLink")],1),s._v("即可。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20221223235133322.png",alt:"image-20221223235133322"}})]),s._v(" "),t("p",[s._v("启动后，可以访问项目，但是控制台可能出现一下报错")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20221223235859847.png",alt:"image-20221223235859847"}})]),s._v(" "),t("p",[s._v("原因是因为执行器没有启动的原因，这里我们可以先忽略掉")]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("启动项目admin（集群）")])]),s._v(" "),t("p",[s._v("调度中心支持集群部署，"),t("strong",[s._v("提升调度系统容灾和可用性")]),s._v("。")]),s._v(" "),t("p",[s._v("调度中心集群部署时，几点要求和建议：")]),s._v(" "),t("ul",[t("li",[s._v("DB配置保持一致；")]),s._v(" "),t("li",[s._v("集群机器时钟保持一致（单机集群忽视）；")]),s._v(" "),t("li",[s._v("建议：推荐通过nginx为调度中心集群做负载均衡，分配域名。调度中心访问、执行器回调配置、调用API服务等操作均通过该域名进行。")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("启动项目admin（docker）")])]),s._v(" "),t("ul",[t("li",[s._v("下载镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("// Docker地址：https://hub.docker.com/r/xuxueli/xxl-job-admin/     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("建议指定版本号"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull xuxueli/xxl-job-admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("创建容器并运行")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /tmp:/data/applogs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" xxl-job-admin  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" xuxueli/xxl-job-admin:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("指定版本"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n/**\n* 如需自定义 mysql 等配置，可通过 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-e PARAMS"')]),s._v(" 指定，参数格式 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PARAMS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--key=value  --key2=value2"')]),s._v(" ；\n* 配置项参考文件：/xxl-job/xxl-job-admin/src/main/resources/application.properties\n* 如需自定义 JVM内存参数 等配置，可通过 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-e JAVA_OPTS"')]),s._v(" 指定，参数格式 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xmx512m"')]),s._v(" ；\n*/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PARAMS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--spring.datasource.url=jdbc:mysql://127.0.0.1:3306/xxl_job?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /tmp:/data/applogs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" xxl-job-admin  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" xuxueli/xxl-job-admin:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("指定版本"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("部署执行器")])]),s._v(" "),t("p",[s._v("上文我们已经成功开启了调度器，下面我们具体看一下执行器。")]),s._v(" "),t("p",[s._v("执行器其实就是我们写的具体的定时任务。通常执行器都存在于我们的项目当中。")]),s._v(" "),t("p",[s._v("我们可以在sample目录中找到相应的案例：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20221224160129647.png",alt:"image-20221224160129647"}})]),s._v(" "),t("p",[s._v("一个springboot项目中，想要编写执行器，我们首先要引入依赖：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xuxueli"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("xxl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("project"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后我们需要在配置文件中配置执行器所依赖的调度器等相关的信息：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("### 调度中心部署根地址 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：如调度中心集群部署存在多个地址则用逗号分隔。执行器将会使用该地址进行"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"执行器心跳注册"')]),s._v("和"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"任务结果回调"')]),s._v("；为空则关闭自动注册；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("admin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addresses"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xxl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admin\n### 执行器通讯"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOKEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：非空时启用；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("accessToken"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n### 执行器"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AppName")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：执行器心跳注册分组依据；为空则关闭自动注册\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("appname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sample\n### 执行器注册 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：优先使用该配置作为注册地址，为空时使用内嵌服务 ”"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PORT")]),s._v("“ 作为注册地址。从而更灵活的支持容器类型执行器动态"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("和动态映射端口问题。\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n### 执行器"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：默认为空表示自动获取"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("，多网卡时可手动设置指定"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("，该"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("不会绑定"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Host")]),s._v("仅作为通讯实用；地址信息用于 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"执行器注册"')]),s._v(" 和 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"调度中心请求并触发任务"')]),s._v("；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n### 执行器端口号 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：小于等于"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("则自动获取；默认端口为"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("，单机部署多个执行器时，注意要配置不同执行器端口；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("\n### 执行器运行日志文件存储磁盘路径 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ：需要对该路径拥有读写权限；为空则使用默认路径；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("applogs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xxl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jobhandler\n### 执行器日志文件保存天数 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选填"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ： 过期日志自动清理"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 限制值大于等于"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("时生效"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 否则"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 如"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 关闭自动清理功能；\nxxl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("executor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logretentiondays"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("添加对应的配置类，读取配置文件的信息：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XxlJobConfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Logger")]),s._v(" logger "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoggerFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XxlJobConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.admin.addresses}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" adminAddresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.accessToken}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" accessToken"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.appname}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" appname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.address}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.ip}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.port}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.logpath}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" logPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${xxl.job.executor.logretentiondays}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" logRetentionDays"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XxlJobSpringExecutor")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xxlJobExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('">>>>>>>>>>> xxl-job config init."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XxlJobSpringExecutor")]),s._v(" xxlJobSpringExecutor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XxlJobSpringExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAdminAddresses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("adminAddresses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAppname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAddress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setIp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAccessToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("accessToken"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setLogPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setLogRetentionDays")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logRetentionDays"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" xxlJobSpringExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("p",[s._v("这样，执行器的基本配置就已经完成了。")])])}),[],!1,null,null,null);t.default=r.exports}}]);