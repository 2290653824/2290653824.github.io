(window.webpackJsonp=window.webpackJsonp||[]).push([[375],{699:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一般流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一般流程"}},[s._v("#")]),s._v(" 一般流程")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git add .\n\ngit commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"提交信息"')]),s._v("\n\ngit push\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("理解commit")]),s._v(" "),a("p",[s._v("就像存档一样，当我们写了一定的代码量过后，应该主动进行一次commit，以便于我们在可以进行"),a("strong",[s._v("回滚操作")])]),s._v(" "),a("h2",{attrs:{id:"commit日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit日志"}},[s._v("#")]),s._v(" commit日志")]),s._v(" "),a("p",[s._v("我们怎么知道我们提价的信息是什么，应该进行怎么回滚，这就需要我们查询相关的日志")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git log\n\ngit log pretty=oneline\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[a("span",{pre:!0,attrs:{class:"token command"}},[s._v("$ git log"),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v(" --pretty")]),s._v("=oneline")]),s._v("\n1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -> master) append GPL\ne475afc93c209a690c39c13a46716e8fa000c366 add distributed\neaadf4e385e865d25c48e7ca9c8395c3f7dfaef0 wrote a readme file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("其中每次提交都会对应应该id，使用的是SHA1算法")]),s._v(" "),a("h2",{attrs:{id:"回滚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#回滚"}},[s._v("#")]),s._v(" 回滚")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git reset --hard HEAD^  //回滚到上一个commit\ngit reset --hard commitId //回滚到指定的commit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("Git的版本回退速度非常快，因为Git在内部有个指向当前版本的"),a("code",[s._v("HEAD")]),s._v("指针，当你回退版本的时候，Git仅仅是把HEAD从指向"),a("code",[s._v("append GPL")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-ascii line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("┌────┐\n│HEAD│\n└────┘\n   │\n   └──▶ ○ append GPL\n        │\n        ○ add distributed\n        │\n        ○ wrote a readme file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("改为指向"),a("code",[s._v("add distributed")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-ascii line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("┌────┐\n│HEAD│\n└────┘\n   │\n   │    ○ append GPL\n   │    │\n   └──▶ ○ add distributed\n        │\n        ○ wrote a readme file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("然后顺便把工作区的文件更新了。所以你让"),a("code",[s._v("HEAD")]),s._v("指向哪个版本号，你就把当前版本定位在哪。")]),s._v(" "),a("p",[s._v("注意"),a("code",[s._v("git reset --hard commitid")]),s._v("会把暂存区中的信息清空")]),s._v(" "),a("h2",{attrs:{id:"操作日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作日志"}},[s._v("#")]),s._v(" 操作日志")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git reflog\n\ne475afc HEAD@{1}: reset: moving to HEAD^\n1094adb (HEAD -> master) HEAD@{2}: commit: append GPL\ne475afc HEAD@{3}: commit: add distributed\neaadf4e HEAD@{4}: commit (initial): wrote a readme file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("根据操作日志，我们可以找到我们对应的commitid，然后重返未来的commit")]),s._v(" "),a("h2",{attrs:{id:"暂存区相关操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#暂存区相关操作"}},[s._v("#")]),s._v(" 暂存区相关操作")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git add把文件从工作区>>>>暂存区，git commit把文件从暂存区>>>>仓库，\n\ngit diff查看工作区和暂存区差异，\n\ngit diff --cached查看暂存区和仓库差异，\n\ngit diff HEAD 查看工作区和仓库的差异，\n\ngit add的反向命令git checkout，撤销工作区修改，即把暂存区最新版本转移到工作区，\n\ngit commit的反向命令git reset HEAD，就是把仓库最新版本转移到暂存区。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("另外需要注意，git追踪的是修改，不是文件，所以只要文件有修改，就会产生暂存区与工作区的不一致。")])])}),[],!1,null,null,null);a.default=n.exports}}]);