(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{485:function(e,s,a){"use strict";a.r(s);var r=a(4),t=Object(r.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("当我使用kafka时，启动了broker，创建了主题，此时我对主题的分区进行了扩充。但是我发现生产者拉取元数据时并没有成功拉取，还是以前的数据，重启kafka生产者也没有任何用。此时我想是不是应该重启下kafka broker。我是先强制关掉kafka，然后再启动kafka，但是这一启动就报错了。")]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("org.apache.kafka.common.KafkaException: Failed to acquire lock on "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("file")]),e._v(" .lock "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" /tmp/kafka-logs. A Kafka instance "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" another process or thread is using this directory.\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("现实上面的错误，其含义似乎是另一个进程在log文件中正在运行（上了锁），这时我们的broker无法在这个文件上运行了，所以就运行失败了。\n那么想要成功启动该怎么办？\n-> 关掉那个运行相应日志的进程")]),e._v(" "),s("p",[e._v("怎么查找到这个进程？\n-> 使用ps命令")]),e._v(" "),s("p",[e._v("怎么关掉这个进程\n-> 使用kill命令")]),e._v(" "),s("p",[e._v("然后重新运行kafka即可")]),e._v(" "),s("p",[e._v("重点讲解下ps查找进程的过程。\n首先，我们要明白，kafka进程的特征。其在运行时一定为指定配置文件。\n这条命令的作用是列出系统中所有正在运行的进程，然后通过管道符号 | 将输出结果传递给下一个命令。第二个命令 grep server.properties 是在前面输出的结果中查找包含 server.properties 字符串的行。而第三个命令 grep -v grep 则是去除查找结果中包含 grep 字符串的行，因为这些行只是表示我们执行了查找命令本身，并不代表真正的进程。总之，这条命令的目的是查找正在运行的与 server.properties 相关的进程并显示其相关信息。\ngrep -v 命令是 grep 的一个选项，它的作用是排除掉包含指定模式的行，只输出不包含该模式的行。具体来说，-v 选项可以理解为取反操作，即将匹配模式和待匹配文本进行比较，如果一致就排除掉该行，否则保留该行。在实际使用中，grep -v 常用于过滤掉一些不需要的行或者筛选出与我们所需内容无关的行，使得输出结果更加精准。")]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v(" aux "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" server.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);