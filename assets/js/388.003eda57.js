(window.webpackJsonp=window.webpackJsonp||[]).push([[388],{712:function(e,t,n){"use strict";n.r(t);var v=n(4),p=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("体验到了ChatGPT的强大之后，那么我们会想，如果我们想基于ChatGPT开发一个自己的聊天机器人，这个能搞定吗？")]),e._v(" "),t("p",[e._v("ChatGPT平台已经为技术提供了一个入口了，很简单的就是实现了。")]),e._v(" "),t("p",[e._v("1、准备工作")]),e._v(" "),t("p",[e._v("（1）已成功注册 OpenAI 的账号。")]),e._v(" "),t("p",[e._v("（2）创建 API KEY，这个 API KEY 是用于 HTTP 请求身份验证的，可以创建多个。注意这个创建之后需要马上复制好保存，关闭弹框之后就看不到了。")]),e._v(" "),t("p",[e._v("（3）官方 API 文档链接：")]),e._v(" "),t("p",[e._v("https://platform.openai.com/docs/api-reference/authentication")]),e._v(" "),t("p",[e._v("（4）注意 API 调用是收费的，但是 OpenAI 已经为我们免费提供了18美元的用量，足够大家放心使用。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedFjKAFpyWUFe2SLP9ZCjStgqmI9ha.png",alt:"img"}})]),e._v(" "),t("p",[e._v("2、补全接口示例")]),e._v(" "),t("p",[e._v("该接口功能较多，支持最常用的问答功能。")]),e._v(" "),t("p",[e._v("（1）请求方式，Post")]),e._v(" "),t("p",[e._v("（2）url：https://api.openai.com/v1/completions")]),e._v(" "),t("p",[e._v("（3）请求体 (json)。")]),e._v(" "),t("p",[e._v("{")]),e._v(" "),t("p",[e._v('"model": "text-davinci-003",')]),e._v(" "),t("p",[e._v('"prompt": "Say this is a test",')]),e._v(" "),t("p",[e._v('"max_tokens": 7,')]),e._v(" "),t("p",[e._v('"temperature": 0,')]),e._v(" "),t("p",[e._v('"top_p": 1,')]),e._v(" "),t("p",[e._v('"n": 1,')]),e._v(" "),t("p",[e._v('"stream": false')]),e._v(" "),t("p",[e._v("}")]),e._v(" "),t("p",[e._v("（4）接口文档")]),e._v(" "),t("p",[e._v("https://platform.openai.com/docs/api-reference/completions/create")]),e._v(" "),t("p",[e._v("请求参数解析：")]),e._v(" "),t("p",[e._v("model")]),e._v(" "),t("p",[e._v("可选参数。语言模型，这里选择的是text-davinci-003")]),e._v(" "),t("p",[e._v("prompt")]),e._v(" "),t("p",[e._v("必选参数。即用户的输入。")]),e._v(" "),t("p",[e._v("max_tokens")]),e._v(" "),t("p",[e._v("可选参数，默认值为 16。最大分词数，会影响返回结果的长度。")]),e._v(" "),t("p",[e._v("temperature")]),e._v(" "),t("p",[e._v("可选参数，默认值为 1，取值 0-2。该值越大每次返回的结果越随机，即相似度越小。")]),e._v(" "),t("p",[e._v("top_p")]),e._v(" "),t("p",[e._v("可选参数，与temperature类似。")]),e._v(" "),t("p",[e._v("n")]),e._v(" "),t("p",[e._v("可选参数，默认值为 1。表示对每条prompt生成多少条结果。")]),e._v(" "),t("p",[e._v("stream")]),e._v(" "),t("p",[e._v("可选参数，默认值为false。表示是否回流部分结果。")]),e._v(" "),t("p",[e._v("3、申请API-KEY")]),e._v(" "),t("p",[e._v("访问地址：")]),e._v(" "),t("p",[e._v("https://platform.openai.com/account/api-keys")]),e._v(" "),t("p",[e._v("登录账号，然后创建API KEY:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedFi531oKfIGbNKftjw30KF-ufF3Ou.png",alt:"img"}})]),e._v(" "),t("p",[e._v("这个 API KEY 是用于 HTTP 请求身份验证的，可以创建多个。注意这个创建之后需要马上复制好保存，关闭弹框之后就看不到了。")]),e._v(" "),t("p",[e._v("4、JavaScript调用API")]),e._v(" "),t("p",[e._v("直接可以使用js+html开发一个对话，具体的源码如下：")]),e._v(" "),t("p",[e._v("<!doctype html>\n")]),t("html",{staticClass:"no-js",attrs:{lang:""}},[t("p"),e._v(" "),t("head",[t("meta",{attrs:{charset:"utf-8"}}),e._v(" "),t("meta",{attrs:{"http-equiv":"x-ua-compatible",content:"ie=edge"}}),e._v(" "),t("title",[e._v("Ai - Chat")]),e._v(" "),t("meta",{attrs:{name:"description",content:""}}),e._v(" "),t("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1"}}),e._v(" "),t("style",[e._v('\n         #chatgpt-response {\n            font-family: "宋体";\n            font-size: 20px;\n            color: #0000FF;\n            font-weight: bold;\n         }\n')]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('  <script>\n     async function callCHATGPT() {\n        var responseText1 = document.getElementById("chatgpt-response");\n        responseText1.innerHTML = ""\n')])])]),t("p",[e._v('​            function printMessage(message) {\n​               var responseText = document.getElementById("chatgpt-response");\n​               var index = 0;')]),e._v(" "),t("p",[e._v("​               // 创建一个定时器，每隔一段时间打印一个字符\n​               var interval = setInterval(function() {\n​                     responseText.innerHTML += message[index];\n​                     index++;")]),e._v(" "),t("p",[e._v('​                     // 当打印完成时，清除定时器\n​                     if (index >= message.length) {\n​                        clearInterval(interval);\n​                     }\n​                  },\n​                  150); // 每隔50毫秒打印一个字符\n​            }\n​            var xhr = new XMLHttpRequest();\n​            var url = "https://api.openai.com/v1/completions";\n​            xhr.open("POST", url, true);\n​            xhr.setRequestHeader("Content-Type", "application/json");\n​            xhr.setRequestHeader("Authorization", "Bearer API-KEY");\n​            xhr.onreadystatechange = function() {\n​               if (xhr.readyState === 4 && xhr.status === 200) {\n​                  var json = JSON.parse(xhr.responseText);\n​                  var response = json.choices[0].text;')]),e._v(" "),t("p",[e._v('​                  // 将CHATGPT的返回值输出到文本框\n​                  var responseText = document.getElementById("chatgpt-response");\n​                  var index = 0;')]),e._v(" "),t("p",[e._v("​                  // 创建一个定时器，每隔一段时间打印一个字符\n​                  var interval = setInterval(function() {\n​                        responseText.innerHTML += response[index];\n​                        index++;")]),e._v(" "),t("p",[e._v("​                        // 当打印完成时，清除定时器\n​                        if (index >= response.length) {\n​                           clearInterval(interval);\n​                        }\n​                     },\n​                     50); // 每隔50毫秒打印一个字符\n​               }\n​            };")]),e._v(" "),t("p",[e._v('​            var data = JSON.stringify({\n​               "prompt": document.getElementById("chat-gpt-input").value,\n​               "max_tokens": 2048,\n​               "temperature": 0.5,\n​               "top_p": 1,\n​               "frequency_penalty": 0,\n​               "presence_penalty": 0,\n​               "model": "text-davinci-003"\n​            });\n​            console.log(data);\n​            await printMessage(\'正在思考，请等待......\');\n​            await xhr.send(data);\n​         }\n')])]),t("p"),e._v(" "),t("body",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('  <div class="filter-menu text-center mb-40">\n     <h4>与Ai对话，请描述您的需求-支持中文、英语、日本语等</h4>\n  </div>\n\n  <textarea class="form-control" id="chat-gpt-input" placeholder="输入描述" rows="3" resize="none"\n     style="width: 135%; margin: 0 auto; background-color: #f4f4f4; color: #333; border: 1px solid #ccc; border-radius: 12px;"></textarea>\n')])])]),t("p",[e._v('​      <button onclick="callCHATGPT()" autocomplete="off" class="btn btn-large" href="#"\n​         style="background-color: #333; color: #f4f4f4; border-radius: 10px">\n​         '),t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),e._v("回答\n​      "),e._v(" "),t("textarea",{staticClass:"form-control",staticStyle:{width:"150%",height:"auto",margin:"0 auto","background-color":"#f4f4f4",color:"#333",border:"1px solid #ccc","border-radius":"10px",overflow:"scroll"},attrs:{id:"chatgpt-response",placeholder:"请耐心等待回答 Ai生成它很快，但是由于网络问题我们需要等待，通常内容越长等待越久 如果长时间没反应请刷新页面重试",rows:"26",resize:"none",readonly:"true"}})]),e._v(" "),t("p",[e._v("注意：需要替换自己的api-key，修改这一行代码：")]),e._v(" "),t("p",[e._v('xhr.setRequestHeader("Authorization", "Bearer API-KEY")。')]),e._v(" "),t("p",[e._v("运行一下html，看下效果：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedFouPcUGC4JKa6ya-hE4_rEnj-Ln1.png",alt:"img"}})]),e._v(" "),t("p",[e._v("5、SpringBoot使用ChatGPT API")]),e._v(" "),t("p",[e._v("（1）构建一个Spring Boot项目，这里使用的是2.7.6版本；")]),e._v(" "),t("p",[e._v("（2）引入依赖：")]),e._v(" "),t("dependency",[t("groupId",[e._v("com.theokanning.openai-gpt3-java")]),e._v(" "),t("artifactId",[e._v("service")]),e._v(" "),t("version",[e._v("0.10.0")])],1),e._v(" "),t("p",[e._v("官网链接地址：https://platform.openai.com/docs/libraries/community-libraries")]),e._v(" "),t("p",[e._v("（3）请求代码：")]),e._v(" "),t("p",[e._v('String token = "API-KEY ";//System.getenv("OPENAI_TOKEN");')]),e._v(" "),t("p",[e._v("OpenAiService service = new OpenAiService(token);")]),e._v(" "),t("p",[e._v("CompletionRequest completionRequest = CompletionRequest.builder()")]),e._v(" "),t("p",[e._v('​    .model("text-davinci-003")')]),e._v(" "),t("p",[e._v('​    .prompt("今天天气怎么样？")')]),e._v(" "),t("p",[e._v("​    .temperature(0.5)")]),e._v(" "),t("p",[e._v("​    .maxTokens(2048)")]),e._v(" "),t("p",[e._v("​    .topP(1D)")]),e._v(" "),t("p",[e._v("​    .frequencyPenalty(0D)")]),e._v(" "),t("p",[e._v("​    .presencePenalty(0D)")]),e._v(" "),t("p",[e._v("​    .build();")]),e._v(" "),t("p",[e._v("service.createCompletion(completionRequest).getChoices().forEach(System.out::println);")]),e._v(" "),t("p",[e._v("请替换API-KEY。")]),e._v(" "),t("p",[e._v("运行程序：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedFl02ovc59QQ2r1NuR-_36YOqUdxD.png",alt:"img"}})]),e._v(" "),t("p",[e._v("我就是我，是颜色不一样的烟火。")]),e._v(" "),t("p",[e._v("我就是我，是与众不同的小苹果。")]),e._v(" "),t("p",[e._v("来源：https://mp.weixin.qq.com/s/dMfOp-XJjszNUmZ9xgsYbw")])],1)])])}),[],!1,null,null,null);t.default=p.exports}}]);