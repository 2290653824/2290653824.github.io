(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{497:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"mac安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mac安装"}},[s._v("#")]),s._v(" mac安装")]),s._v(" "),a("p",[s._v("下载官网:"),a("a",{attrs:{href:"https://zookeeper.apache.org/releases.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://zookeeper.apache.org/releases.html"),a("OutboundLink")],1)]),s._v(" "),a("ol",[a("li",[s._v("官网下载文件")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedimage-20230224232402185.png",alt:"image-20230224232402185"}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("下载后的文件解压")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedimage-20230224232623336.png",alt:"image-20230224232623336"}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("进入conf/目录下，将zoo_sample.cfg文件复制未zoo.cfg")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedimage-20230224232822000.png",alt:"image-20230224232822000"}})]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("进入zoo.cfg文件中，修改相关的配置")])]),s._v(" "),a("p",[s._v("如端口、文件存放位置、日志存放位置")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/undefinedimage-20230224232940461.png",alt:"image-20230224232940461"}})]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("配置成功，开始命令启动")])]),s._v(" "),a("p",[s._v("在bin目录下")]),s._v(" "),a("ul",[a("li",[s._v("启动服务端")])]),s._v(" "),a("p",[s._v("输入命令"),a("code",[s._v("./zkServer.sh start")]),s._v("启动命令")]),s._v(" "),a("p",[s._v("​      "),a("code",[s._v("./zkServer.sh status")]),s._v("查看状态")]),s._v(" "),a("p",[s._v("​     "),a("code",[s._v("./zkServer.sh stop")]),s._v(" 停止命令")]),s._v(" "),a("ul",[a("li",[s._v("启动客户端")])]),s._v(" "),a("p",[s._v("启动客户端命令")]),s._v(" "),a("p",[a("code",[s._v("./zkCli.sh -server 127.0.0.1:2181")])]),s._v(" "),a("h2",{attrs:{id:"linux安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux安装"}},[s._v("#")]),s._v(" linux安装")]),s._v(" "),a("p",[s._v("安装前首先当然是下载安装包了。我们进入，"),a("a",{attrs:{href:"https://so.csdn.net/so/search?q=zookeeper&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[s._v("zookeeper"),a("OutboundLink")],1),s._v("官网： https://zookeeper.apache.org/releases.html")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("前提：由于zookeeper是使用java语言开发的，所以，在安装zookeeper之前务必先在本机安装配置好java环境！")])])]),s._v(" "),a("h3",{attrs:{id:"_1-找到下载链接-然后在linux中先下载所需安装包-我这边下载的是3-4-9版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-找到下载链接-然后在linux中先下载所需安装包-我这边下载的是3-4-9版本"}},[s._v("#")]),s._v(" 1.找到下载链接，然后在linux中先下载所需安装包（我这边下载的是3.4.9版本）：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://archive.apache.org/dist/zookeeper/zookeeper-3.4.9/zookeeper-3.4.9.tar.gz\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721172833491.png",alt:"image-20230721172833491"}})]),s._v(" "),a("h3",{attrs:{id:"_2-解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-解压"}},[s._v("#")]),s._v(" 2.解压")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" zookeeper-3.4.9.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721172849705.png",alt:"image-20230721172849705"}})]),s._v(" "),a("h3",{attrs:{id:"_3-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置文件"}},[s._v("#")]),s._v(" 3. 配置文件")]),s._v(" "),a("p",[s._v("可以看到这里有个zoookeeper给我们的一个样例配置文件：zoo_sample.cfg，我们在配置我们自己的zk时，需要做的就是将这个文件复制一份，并命名为：zoo.cfg，然后在zoo.cfg中修改自己的配置即可。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zoo_sample.cfg zoo.cfg\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zoo.cfg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("zoo.cfg的相关配置项其实并不多，这边各个配置项的详细说明如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zookeeper内部的基本单位，单位是毫秒，这个表示一个tickTime为2000毫秒，在zookeeper的其他配置中，都是基于tickTime来做换算的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#集群中的follower服务器(F)与leader服务器(L)之间 初始连接 时能容忍的最多心跳数（tickTime的数量）。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#syncLimit：集群中的follower服务器(F)与leader服务器(L)之间 请求和应答 之间能容忍的最多心跳数（tickTime的数量）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据存放文件夹，zookeeper运行过程中有两个数据需要存储，一个是快照数据（持久化数据）另一个是事务日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/zookeeper\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端访问端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"_4-配置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置环境变量"}},[s._v("#")]),s._v(" 4. 配置环境变量")]),s._v(" "),a("p",[s._v("cd /etc/profile 末尾加上")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOKEEPER_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/zookeeper/zookeeper-3.4.9\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721172958270.png",alt:"image-20230721172958270"}})]),s._v(" "),a("p",[s._v("生效："),a("code",[s._v("source profile")])]),s._v(" "),a("h3",{attrs:{id:"_5-启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动"}},[s._v("#")]),s._v(" 5. 启动")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("zkServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721173041617.png",alt:"image-20230721173041617"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("zkServer.sh status\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721173046651.png",alt:"image-20230721173046651"}})]),s._v(" "),a("p",[s._v("使用命令"),a("code",[s._v("jps")]),s._v("可以看到java进程QuorumPeerMain执行")]),s._v(" "),a("ul",[a("li",[s._v("客户端连接")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230721173105466.png",alt:"image-20230721173105466"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);