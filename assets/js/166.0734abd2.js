(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{488:function(a,s,t){"use strict";t.r(s);var r=t(4),n=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"_1-é‡‡ç”¨ä½•ç§æ–¹å¼è¿›è¡Œæ¶ˆè´¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-é‡‡ç”¨ä½•ç§æ–¹å¼è¿›è¡Œæ¶ˆè´¹"}},[a._v("#")]),a._v(" 1. é‡‡ç”¨ä½•ç§æ–¹å¼è¿›è¡Œæ¶ˆè´¹")]),a._v(" "),s("p",[s("strong",[a._v("Kafka Consumer é‡‡ç”¨çš„æ˜¯ä¸»åŠ¨æ‹‰å– Broker æ•°æ®è¿›è¡Œæ¶ˆè´¹çš„å³ Pull æ¨¡å¼")])]),a._v(" "),s("p",[a._v("ä¸ºä»€ä¹ˆä¸é‡‡ç”¨pushæ¨¡å¼ï¼Ÿbrokeræ— æ³•æ„ŸçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦ï¼Œå¯èƒ½ä¼šå¯¼è‡´consumerçš„æ¶ˆæ¯å †ç§¯")]),a._v(" "),s("p",[s("strong",[a._v("é‡‡ç”¨pullä¸€å®šå¥½å—ï¼Ÿ")])]),a._v(" "),s("p",[a._v("å¦‚æœ Kafka Broker æ²¡æœ‰æ¶ˆæ¯ï¼Œè¿™æ—¶æ¯æ¬¡ Consumer æ‹‰å–çš„éƒ½æ˜¯ç©ºæ•°æ®, å¯èƒ½ä¼šä¸€ç›´å¾ªç¯è¿”å›ç©ºæ•°æ®ã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒConsumer åœ¨æ¯æ¬¡è°ƒç”¨ Poll() æ¶ˆè´¹æ•°æ®çš„æ—¶å€™ï¼Œé¡ºå¸¦ä¸€ä¸ª timeout å‚æ•°ï¼Œå½“è¿”å›ç©ºæ•°æ®çš„æ—¶å€™ï¼Œä¼šåœ¨ Long Polling ä¸­è¿›è¡Œé˜»å¡ï¼Œç­‰å¾… timeout å†å»æ¶ˆè´¹ï¼Œç›´åˆ°æ•°æ®åˆ°è¾¾ã€‚")]),a._v(" "),s("h2",{attrs:{id:"_2-consumerçš„åˆå§‹åŒ–-å½“å¯åŠ¨ä¸€ä¸ªæ¶ˆè´¹è€…æ—¶-ä¼šåšäº›ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-consumerçš„åˆå§‹åŒ–-å½“å¯åŠ¨ä¸€ä¸ªæ¶ˆè´¹è€…æ—¶-ä¼šåšäº›ä»€ä¹ˆ"}},[a._v("#")]),a._v(" 2. consumerçš„åˆå§‹åŒ–ï¼Ÿå½“å¯åŠ¨ä¸€ä¸ªæ¶ˆè´¹è€…æ—¶ï¼Œä¼šåšäº›ä»€ä¹ˆ")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/jpeg/29475739/1668572061308-51ca5418-0cae-4994-a489-f30d4f1df4d7.jpeg",alt:"img"}})]),a._v(" "),s("ol",[s("li",[s("ol",[s("li",[a._v("æ„é€  Propertity å¯¹è±¡ï¼Œè¿›è¡Œ Consumer ç›¸å…³çš„é…ç½®ï¼›")]),a._v(" "),s("li",[a._v("åˆ›å»º KafkaConsumer çš„å¯¹è±¡ Consumerï¼›")]),a._v(" "),s("li",[a._v("è®¢é˜…ç›¸åº”çš„ Topic åˆ—è¡¨ï¼›")]),a._v(" "),s("li",[a._v("è°ƒç”¨ Consumer çš„ poll() æ–¹æ³•æ‹‰å–è®¢é˜…çš„æ¶ˆæ¯")])])])]),a._v(" "),s("h2",{attrs:{id:"_3-consumerä¸»è¦æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-consumerä¸»è¦æµç¨‹"}},[a._v("#")]),a._v(" 3. consumerä¸»è¦æµç¨‹"),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668572201988-706f83d1-682e-4f2f-9e02-2adc66dcfd58.png",alt:"img"}})]),a._v(" "),s("h2",{attrs:{id:"_4-æ¶ˆè´¹è€…ç»„æœºåˆ¶-é‡ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ¶ˆè´¹è€…ç»„æœºåˆ¶-é‡ç‚¹"}},[a._v("#")]),a._v(" 4. æ¶ˆè´¹è€…ç»„æœºåˆ¶ï¼ˆé‡ç‚¹ï¼‰")]),a._v(" "),s("p",[a._v("a. å¦‚æœè®©å•ä¸ªæ¶ˆè´¹è€…å»æ¶ˆè´¹ä¸€ä¸ªtopicï¼Œè¿™æ ·è‚¯å®šæ˜¯ä¸æ»¡è¶³kafkaé«˜æ€§èƒ½çš„è¦æ±‚çš„ã€‚æ‰€ä»¥å°±è®¾å®šäº†ä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼Œè®©æ¶ˆè´¹è€…ç»„ä¸­çš„æ¶ˆè´¹è€…å»æ¶ˆè´¹åŒä¸€ä¸ªtopicã€‚")]),a._v(" "),s("p",[a._v("b. åŒæ—¶å¦‚æœä¸€ä¸ªæ¶ˆè´¹è€…æŒ‚äº†ï¼Œé‚£ä¹ˆæ¶ˆè´¹topicçš„è¡ŒåŠ¨å°±åœæ­¢äº†ï¼Œè¿™ä¸æ˜¯å¯¹äºå®¹é”™æ€§æœ‰ä¸€å®šçš„å½±å“å—ï¼Œæˆ‘ä»¬å¸Œæœ›å½“ä¸€ä¸ªæ¶ˆè´¹è€…æŒ‚äº†è¿‡åï¼Œå¦ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥ä»æ¶ˆè´¹ä¸€ä¸ªtopicä¸­çš„ä¿¡æ¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¾é åŒä¸€ä¸ªæ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…æ¶ˆè´¹åŒä¸€ä¸ªæ¶ˆè´¹è€…")]),a._v(" "),s("p",[a._v("æ¶ˆè´¹ç»„çš„ç‰¹ç‚¹ï¼š")]),a._v(" "),s("ol",[s("li",[s("ol",[s("li",[a._v("æ¯ä¸ª Consumer Group æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª Consumer")]),a._v(" "),s("li",[a._v("æ¯ä¸ª Consumer Group æ‹¥æœ‰ä¸€ä¸ªå…¬å…±ä¸”å”¯ä¸€çš„ Group ID")]),a._v(" "),s("li",[a._v("Consumer Group åœ¨æ¶ˆè´¹ Topic çš„æ—¶å€™ï¼ŒTopic çš„æ¯ä¸ª Partition åªèƒ½åˆ†é…ç»™ç»„å†…çš„æŸä¸ª Consumerï¼Œåªè¦è¢«ä»»ä½• Consumer æ¶ˆè´¹ä¸€æ¬¡, é‚£ä¹ˆè¿™æ¡æ•°æ®å°±å¯ä»¥è®¤ä¸ºè¢«å½“å‰ Consumer Group æ¶ˆè´¹æˆåŠŸ")])])])]),a._v(" "),s("p",[a._v("é‚£ä¹ˆæ¶ˆè´¹ç»„ä¸­æ˜¯æ€ä¹ˆä¸ºæ¯ä¸ªæ¶ˆè´¹è€…åˆ†é…æ¶ˆè´¹çš„partionåˆ†åŒºå‘¢ï¼Ÿ")]),a._v(" "),s("ol",[s("li",[a._v("partionåˆ†é…ç­–ç•¥æœºåˆ¶")])]),a._v(" "),s("p",[a._v("kafkaå®¢æˆ·ç«¯æä¾›äº†3ç§åˆ†é…ç­–ç•¥")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("RangeAssignor "),s("strong",[a._v("ï¼ˆ"),s("strong",[s("strong",[a._v("æŒ‰ç…§Kafkaé»˜è®¤çš„æ¶ˆè´¹é€»è¾‘è®¾å®šï¼Œä¸€ä¸ªåˆ†åŒºåªèƒ½è¢«åŒä¸€ä¸ªæ¶ˆè´¹ç»„ï¼ˆConsumerGroupï¼‰å†…çš„ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹")])]),a._v("ï¼‰")])]),a._v(" "),s("p",[s("strong",[a._v("RangeAssignor æ˜¯ Kafka é»˜è®¤çš„åˆ†åŒºåˆ†é…ç®—æ³•ï¼Œå®ƒæ˜¯æŒ‰ç…§ Topic çš„ç»´åº¦è¿›è¡Œåˆ†é…çš„")]),a._v("ï¼Œå¯¹äºæ¯ä¸ª Topicï¼Œé¦–å…ˆå¯¹ Partition æŒ‰ç…§åˆ†åŒºIDè¿›è¡Œæ’åºï¼Œç„¶åå¯¹è®¢é˜…è¿™ä¸ª Topic çš„ Consumer Group ä¸­çš„ Consumer å†è¿›è¡Œæ’åºï¼Œä¹‹åå°½é‡"),s("strong",[a._v("å‡è¡¡çš„æŒ‰ç…§èŒƒå›´åŒºæ®µ")]),a._v("å°†åˆ†åŒºåˆ†é…ç»™ Consumerã€‚æ­¤æ—¶å¯èƒ½ä¼šé€ æˆå…ˆåˆ†é…åˆ†åŒºçš„ Consumer è¿›ç¨‹çš„ä»»åŠ¡è¿‡é‡ï¼ˆåˆ†åŒºæ•°æ— æ³•è¢«æ¶ˆè´¹è€…æ•°é‡æ•´é™¤ï¼‰ã€‚")])])]),a._v(" "),s("p",[a._v("æ¡ˆä¾‹å¦‚ä¸‹ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573041690-b05a0606-c934-4769-a0eb-3be4f5e8ea95.png",alt:"img"}}),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573044557-c33406c8-cd99-4c07-a026-9b8f4d149daa.png",alt:"img"}}),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573047359-d884932d-2d0c-4c66-a8b5-b9e9b460219e.png",alt:"img"}})]),a._v(" "),s("p",[a._v("å¦ä¸€ç§å±•ç¤ºå¦‚ä¸‹ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573182168-31631dd7-f0e3-4437-bfaf-5bdfeca286ce.png",alt:"img"}})]),a._v(" "),s("p",[a._v("å¦ä¸€ç§å±•ç¤ºï¼š")]),a._v(" "),s("p",[a._v("å¯¹äºæ¯ä¸ªè¢«è®¢é˜…çš„Topicï¼Œè®¾Consumeræ€»æ•°ä¸ºcï¼ŒPartitionæ€»æ•°ä¸ºpï¼Œé‚£ä¹ˆRangeAssignorä¼šæ ¹æ®p / cçš„ç»“æœå¾—å‡ºä¸€ä¸ªåŒºé—´å€¼rï¼Œä»¥åŠä½™æ•°å€¼p % cï¼Œè®°ä¸ºmã€‚")]),a._v(" "),s("p",[a._v("å°†æ‰€æœ‰ConsumeræŒ‰ç…§é¢„è®¾å¥½çš„Member IDå­—å…¸åºæ’åºï¼Œä»ç¬¬ä¸€ä¸ªConsumerå¼€å§‹é¡ºåºåˆ†é…ï¼Œå‰mä¸ªConsumeråˆ†é…è¿ç»­çš„(r + 1)ä¸ªPartitionï¼Œå(c - m)ä¸ªConsumeråˆ†é…è¿ç»­çš„rä¸ªPartitionã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573676630-0d5d9641-2eb7-4f1b-afa4-cfc641607077.png",alt:"img"}})]),a._v(" "),s("p",[a._v("å¦‚æœå¤šå¢åŠ 2ä¸ªtopicï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573704926-3d8298df-a3b5-4a25-8faa-869946beee61.png",alt:"img"}})]),a._v(" "),s("p",[a._v("å½“ä¸€ä¸ªtopicä¸­partionæ•°å°äºè®¢é˜…å®ƒçš„consumeræ•°æ—¶ï¼Œä¼šå‡ºç°consumerå¤±æ•ˆ")]),a._v(" "),s("p",[a._v("é—®é¢˜ï¼š")]),a._v(" "),s("p",[s("strong",[a._v("è¿™ç§åˆ†é…æ–¹å¼æ˜æ˜¾çš„é—®é¢˜å°±æ˜¯éšç€æ¶ˆè´¹è€…è®¢é˜…çš„Topicçš„æ•°é‡çš„å¢åŠ ï¼Œä¸å‡è¡¡çš„é—®é¢˜ä¼šè¶Šæ¥è¶Šä¸¥é‡ã€‚")])]),a._v(" "),s("ul",[s("li",[s("p",[s("strong",[a._v("RoundRobinAssignor")])]),a._v(" "),s("p",[a._v("RoundRobinAssignor çš„åˆ†åŒºåˆ†é…ç­–ç•¥æ˜¯å°† Consumer Group å†…è®¢é˜…çš„æ‰€æœ‰ Topic çš„ Partition åŠæ‰€æœ‰ Consumer è¿›è¡Œæ’åºåæŒ‰ç…§é¡ºåºå°½é‡å‡è¡¡çš„ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œåˆ†é…ã€‚å¦‚æœ Consumer Group å†…ï¼Œæ¯ä¸ª Consumer è®¢é˜…éƒ½è®¢é˜…äº†ç›¸åŒçš„Topicï¼Œé‚£ä¹ˆåˆ†é…ç»“æœæ˜¯å‡è¡¡çš„ã€‚å¦‚æœè®¢é˜… Topic æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆåˆ†é…ç»“æœæ˜¯ä¸ä¿è¯â€œå°½é‡å‡è¡¡â€çš„ï¼Œå› ä¸ºæŸäº› Consumer å¯èƒ½ä¸å‚ä¸ä¸€äº› Topic çš„åˆ†é…ã€‚")])])]),a._v(" "),s("p",[a._v("æ¡ˆä¾‹1ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573923052-d692886d-cd9d-4ff8-a741-0a000a0eac74.png",alt:"img"}})]),a._v(" "),s("p",[a._v("æ¡ˆä¾‹2ï¼š")]),a._v(" "),s("p",[a._v("å°†æ‰€æœ‰ä¸»é¢˜çš„åˆ†åŒºç»„æˆ TopicAndPartition åˆ—è¡¨ï¼Œç„¶åå¯¹ TopicAndPartition åˆ—è¡¨æŒ‰ç…§ hashCode è¿›è¡Œæ’åºï¼Œç„¶åå¹³å‡åˆ†é…"),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574039800-8f4f5b84-9153-4e62-abd4-b1f130a73972.png",alt:"img"}}),a._v("ç»™æ¯ä¸€ä¸ªæ¶ˆè´¹è€…çš„çº¿ç¨‹ã€‚")]),a._v(" "),s("p",[a._v("å¤šä¸ªTopicçš„æƒ…å†µä¹Ÿç±»ä¼¼ï¼š"),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574051306-e31275ca-7eed-43cf-bf09-af707c5fe2fa.png",alt:"img"}})]),a._v(" "),s("p",[a._v("ç”±äºåˆ†é…æ—¶æ˜¯æŒ‰æ‰€æœ‰Partitionæ¥çš„ï¼Œæ‰€ä»¥å³ä½¿Topicä¹‹é—´Partitionçš„æ•°é‡æ˜¯ä¸å¹³å‡çš„ï¼Œåˆ†é…ç»“æœä¹Ÿæ˜¯åŸºæœ¬å¹³å‡çš„ï¼Œå…‹æœäº†RangeAssignorçš„ç¼ºç‚¹ã€‚")]),a._v(" "),s("p",[a._v("ç¼ºç‚¹ï¼š "),s("strong",[a._v("å½“ç»„å†…æ¯ä¸ªè®¢é˜…çš„ Topic æ˜¯ä¸åŒæƒ…å†µï¼Œè¿™æ ·å°±å¯èƒ½ä¼šé€ æˆåˆ†åŒºè®¢é˜…çš„å€¾æ–œ:")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668573956576-09a4e004-d4b5-431f-adb1-f005a41b0169.png",alt:"img"}})]),a._v(" "),s("p",[a._v("å¦‚æœåŒä¸€ä¸ªæ¶ˆè´¹ç»„å†…çš„æ¶ˆè´¹è€…æ‰€è®¢é˜…çš„ä¿¡æ¯æ˜¯ä¸ç›¸åŒçš„ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ†åŒºåˆ†é…çš„æ—¶å€™å°±ä¸æ˜¯å®Œå…¨çš„è½®è¯¢åˆ†é…ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´åˆ†åŒºåˆ†é…çš„ä¸å‡åŒ€ã€‚å¦‚æœæŸä¸ªæ¶ˆè´¹è€…æ²¡æœ‰è®¢é˜…æ¶ˆè´¹ç»„å†…çš„æŸä¸ªtopicï¼Œé‚£ä¹ˆåœ¨åˆ†é…åˆ†åŒºçš„æ—¶å€™æ­¤æ¶ˆè´¹è€…å°†åˆ†é…ä¸åˆ°è¿™ä¸ªtopicçš„ä»»ä½•åˆ†åŒºã€‚")]),a._v(" "),s("p",[a._v("æ¡ˆä¾‹ï¼šopic t0ã€t1ã€t2åˆ†åˆ«æœ‰1ã€2ã€3ä¸ªPartitionï¼Œè€ŒConsumer c0è®¢é˜…äº†t0ï¼Œc1è®¢é˜…äº†t0~t1ï¼Œc2è®¢é˜…äº†t0~t2")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574159188-abe7ad44-e7c7-45a0-b49f-7fe08f13cbce.png",alt:"img"}})]),a._v(" "),s("ul",[s("li",[a._v("StickAssignorï¼ˆè¾ƒä¸ºå¤æ‚ï¼Œä½†ä¹Ÿæ˜¯ç²¾é«“æ‰€åœ¨ï¼‰")])]),a._v(" "),s("p",[s("strong",[a._v("StickyAssignor åˆ†åŒºåˆ†é…ç®—æ³•")]),a._v("æ˜¯ Kafka Java å®¢æˆ·ç«¯æä¾›çš„åˆ†é…ç­–ç•¥ä¸­æœ€å¤æ‚çš„ä¸€ç§ï¼Œå¯ä»¥é€šè¿‡ partition.assignment.strategy å‚æ•°å»è®¾ç½®ï¼Œä» 0.11 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ï¼Œç›®çš„å°±æ˜¯åœ¨æ‰§è¡Œæ–°åˆ†é…æ—¶ï¼Œå°½é‡åœ¨ä¸Šä¸€æ¬¡åˆ†é…ç»“æœä¸Šå°‘åšè°ƒæ•´ï¼Œå…¶ä¸»è¦å®ç°äº†ä»¥ä¸‹2ä¸ªç›®æ ‡ï¼š")]),a._v(" "),s("p",[s("strong",[a._v("1)ã€Topic Partition çš„åˆ†é…è¦å°½é‡å‡è¡¡ã€‚")])]),a._v(" "),s("p",[s("strong",[a._v("2)ã€å½“ Rebalance(é‡åˆ†é…ï¼Œåé¢ä¼šè¯¦ç»†åˆ†æ) å‘ç”Ÿæ—¶ï¼Œå°½é‡ä¸ä¸Šä¸€æ¬¡åˆ†é…ç»“æœä¿æŒä¸€è‡´ã€‚")])]),a._v(" "),s("p",[s("strong",[a._v("æ³¨æ„ï¼šå½“ä¸¤ä¸ªç›®æ ‡å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œä¼˜å…ˆä¿è¯ç¬¬ä¸€ä¸ªç›®æ ‡ï¼Œè¿™æ ·å¯ä»¥ä½¿åˆ†é…æ›´åŠ å‡åŒ€ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯3ç§åˆ†é…ç­–ç•¥éƒ½å°½é‡å»å°è¯•å®Œæˆçš„ï¼Œ è€Œç¬¬äºŒä¸ªç›®æ ‡æ‰æ˜¯è¯¥ç®—æ³•çš„ç²¾é«“æ‰€åœ¨ã€‚")])]),a._v(" "),s("p",[a._v("æ¡ˆä¾‹è®²è§£1:")]),a._v(" "),s("p",[a._v("â€‹       "),s("strong",[a._v("1ï¼‰ç»„å†…æ¯ä¸ª Consumer è®¢é˜…çš„ Topic æ˜¯ç›¸åŒæƒ…å†µï¼ŒRoundRobinAssignor è·ŸStickyAssignor åˆ†é…ä¸€è‡´ï¼š")]),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574325515-81d591c7-ff34-463a-b26e-f772b91c562c.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â€‹        "),s("strong",[a._v("å½“ä¸Šè¿°æƒ…å†µå‘ç”Ÿ Rebalance æƒ…å†µåï¼Œå¯èƒ½åˆ†é…ä¼šä¸å¤ªä¸€æ ·ï¼Œå‡å¦‚è¿™æ—¶å€™C1å‘ç”Ÿæ•…éšœä¸‹çº¿ï¼š")])]),a._v(" "),s("p",[s("strong",[a._v("RoundRobinAssignorï¼š")]),s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574508778-4067e440-3d9e-4710-a3bb-643e7deafa9d.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("StickyAssignorï¼š")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574546472-4e055958-0249-443d-9878-828fcf9647bc.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â€‹       "),s("strong",[a._v("ç»“è®º: ä»ä¸Šé¢ Rebalance åçš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ä¸¤ç§åˆ†é…ç­–ç•¥æœ€åéƒ½æ˜¯å‡åŒ€åˆ†é…çš„ï¼Œä½†æ˜¯ RoundRoubinAssignor å®Œå…¨æ˜¯é‡æ–°åˆ†é…äº†ä¸€éï¼Œè€Œ StickyAssignor åˆ™æ˜¯åœ¨åŸå…ˆçš„åŸºç¡€ä¸Šè¾¾åˆ°äº†å‡åŒ€çš„çŠ¶æ€ã€‚")])]),a._v(" "),s("p",[s("strong",[a._v("2)")]),a._v(" "),s("strong",[a._v("å½“ç»„å†…æ¯ä¸ª")]),a._v(" "),s("strong",[a._v("Consumer")]),a._v(" "),s("strong",[a._v("è®¢é˜…çš„ Topic æ˜¯ä¸åŒæƒ…å†µ")]),a._v("**ğŸ˜—*")]),a._v(" "),s("p",[s("strong",[a._v("RoundRobinAssignorï¼š")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574681733-ff8c73b7-4f03-4936-b917-79105d4abbf3.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â€‹        "),s("strong",[a._v("StickyAssignorï¼š")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574759160-30bb93e6-29dc-42c8-83ef-a81adc64e8ae.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â€‹      "),s("strong",[a._v("å½“ä¸Šè¿°æƒ…å†µå‘ç”Ÿ Rebalance æƒ…å†µåï¼Œå¯èƒ½åˆ†é…ä¼šä¸å¤ªä¸€æ ·ï¼Œå‡å¦‚è¿™æ—¶å€™C1å‘ç”Ÿæ•…éšœä¸‹çº¿ï¼š")])]),a._v(" "),s("p",[s("strong",[a._v("RoundRobinAssignorï¼š")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574783879-b42a3d82-34c7-4c42-9fe5-1e247cf72f42.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("StickyAssignorï¼š")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668574792705-bc5ca65f-6776-47e0-9978-7d644f4d75a5.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â€‹     ä»ä¸Šé¢ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒRoundRoubin çš„åˆ†é…ç­–ç•¥åœ¨ Rebalance (é‡åˆ†é…)ä¹‹åé€ æˆäº†ä¸¥é‡çš„åˆ†é…å€¾æ–œã€‚"),s("strong",[a._v("å› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šå¦‚æœæƒ³è¦å‡å°‘é‡åˆ†é…å¸¦æ¥çš„å¼€é”€ï¼Œå¯ä»¥é€‰ç”¨ StickyAssignor çš„åˆ†åŒºåˆ†é…ç­–ç•¥ã€‚")])]),a._v(" "),s("h2",{attrs:{id:"_5-rebalance-é‡åˆ†é…æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-rebalance-é‡åˆ†é…æœºåˆ¶"}},[a._v("#")]),a._v(" 5. rebalance é‡åˆ†é…æœºåˆ¶")]),a._v(" "),s("p",[a._v("Consumer Group æ¥è¯´ï¼Œå¯èƒ½éšæ—¶éƒ½ä¼šæœ‰ Consumer åŠ å…¥æˆ–é€€å‡ºï¼Œé‚£ä¹ˆ Consumer åˆ—è¡¨çš„å˜åŒ–å¿…å®šä¼šå¼•èµ· Partition çš„é‡æ–°åˆ†é…ã€‚æˆ‘ä»¬å°†è¿™ä¸ªåˆ†é…è¿‡ç¨‹å«åš "),s("strong",[a._v("Consumer Rebalanceï¼Œä½†æ˜¯è¿™ä¸ªåˆ†é…è¿‡ç¨‹éœ€è¦å€ŸåŠ© Broker ç«¯çš„ Coordinator åè°ƒè€…ç»„ä»¶ï¼Œåœ¨ Coordinator çš„å¸®åŠ©ä¸‹å®Œæˆæ•´ä¸ªæ¶ˆè´¹è€…ç»„çš„åˆ†åŒºé‡åˆ†é…")]),a._v("ï¼Œ"),s("strong",[a._v("ä¹Ÿæ˜¯é€šè¿‡ç›‘å¬ZooKeeper çš„ /admin/reassign_partitions èŠ‚ç‚¹è§¦å‘çš„ã€‚")])]),a._v(" "),s("p",[a._v("é‡åˆ†é…è§¦å‘ä¸‰ç§æ¡ä»¶ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("å½“ Consumer Group ç»„æˆå‘˜æ•°é‡å‘ç”Ÿå˜åŒ–(ä¸»åŠ¨åŠ å…¥æˆ–è€…ä¸»åŠ¨ç¦»ç»„ï¼Œæ•…éšœä¸‹çº¿ç­‰)")]),a._v(" "),s("li",[a._v("å½“è®¢é˜…ä¸»é¢˜æ•°é‡å‘ç”Ÿå˜åŒ–")]),a._v(" "),s("li",[a._v("å½“è®¢é˜…ä¸»é¢˜çš„åˆ†åŒºæ•°å‘ç”Ÿå˜åŒ–")])]),a._v(" "),s("p",[a._v("rebalanceå¦‚ä½•é€šçŸ¥å…¶ä»–consumerè¿›ç¨‹")]),a._v(" "),s("p",[a._v("Rebalance çš„é€šçŸ¥æœºåˆ¶å°±æ˜¯"),s("strong",[a._v("é  Consumer ç«¯çš„å¿ƒè·³çº¿ç¨‹")]),a._v("ï¼Œå®ƒä¼šå®šæœŸå‘é€å¿ƒè·³è¯·æ±‚åˆ° Broker ç«¯çš„ Coordinator,å½“åè°ƒè€…å†³å®šå¼€å¯ Rebalance åï¼Œå®ƒä¼šå°†â€œREBALANCE_IN_PROGRESSâ€å°è£…")]),a._v(" "),s("p",[a._v("è¿›å¿ƒè·³è¯·æ±‚çš„å“åº”ä¸­å‘é€ç»™ Consumer ,å½“ Consumer å‘ç°å¿ƒè·³å“åº”ä¸­åŒ…å«äº†â€œREBALANCE_IN_PROGRESSâ€ï¼Œå°±çŸ¥é“ Rebalance å¼€å§‹äº†ã€‚")]),a._v(" "),s("p",[a._v("rebalanceåè®®ï¼š")]),a._v(" "),s("p",[a._v("â€‹         å…¶å® Rebalance æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç»„åè®®ã€‚Consumer Group ä¸ Coordinator å…±åŒä½¿ç”¨å®ƒæ¥å®Œæˆ Consumer Group çš„ Rebalanceã€‚ä¸‹é¢æˆ‘çœ‹çœ‹è¿™5ç§åè®®éƒ½æ˜¯ä»€ä¹ˆï¼Œå®Œæˆäº†ä»€ä¹ˆåŠŸèƒ½ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("Heartbeatè¯·æ±‚ï¼šConsumer éœ€è¦å®šæœŸç»™ Coordinator å‘é€å¿ƒè·³æ¥è¯æ˜è‡ªå·±è¿˜æ´»ç€ã€‚")]),a._v(" "),s("li",[a._v("LeaveGroupè¯·æ±‚ï¼šä¸»åŠ¨å‘Šè¯‰ Coordinator è¦ç¦»å¼€ Consumer Group")]),a._v(" "),s("li",[a._v("SyncGroupè¯·æ±‚ï¼šGroup Leader Consumer æŠŠåˆ†é…æ–¹æ¡ˆå‘Šè¯‰ç»„å†…æ‰€æœ‰æˆå‘˜")]),a._v(" "),s("li",[a._v("JoinGroupè¯·æ±‚ï¼šæˆå‘˜è¯·æ±‚åŠ å…¥ç»„")]),a._v(" "),s("li",[a._v("DescribeGroupè¯·æ±‚ï¼šæ˜¾ç¤ºç»„çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æˆå‘˜ä¿¡æ¯ï¼Œåè®®åç§°ï¼Œåˆ†é…æ–¹æ¡ˆï¼Œè®¢é˜…ä¿¡æ¯ç­‰ã€‚é€šå¸¸è¯¥è¯·æ±‚æ˜¯ç»™ç®¡ç†å‘˜ä½¿ç”¨ã€‚"),s("strong",[a._v("Coordinator åœ¨ Rebalance çš„æ—¶å€™ä¸»è¦ç”¨åˆ°äº†å‰é¢4ç§è¯·æ±‚")])])]),a._v(" "),s("p",[s("strong",[a._v("Consumer GroupçŠ¶æ€æœº")])]),a._v(" "),s("p",[a._v("â€‹       Rebalance ä¸€æ—¦å‘ç”Ÿï¼Œå¿…å®šä¼šæ¶‰åŠåˆ° Consumer Group çš„çŠ¶æ€æµè½¬ï¼Œæ­¤æ—¶ Kafka ä¸ºæˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„çŠ¶æ€æœºæœºåˆ¶ï¼Œæ¥å¸®åŠ© Broker Coordinator å®Œæˆæ•´ä¸ªé‡å¹³è¡¡æµç¨‹ã€‚äº†è§£æ•´ä¸ªçŠ¶æ€æµè½¬è¿‡ç¨‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ·±å…¥ç†è§£ Consumer Group çš„è®¾è®¡åŸç†ã€‚")]),a._v(" "),s("ul",[s("li",[a._v("EmptyçŠ¶æ€ï¼š")])]),a._v(" "),s("p",[a._v("â€‹     Empty çŠ¶æ€è¡¨ç¤ºå½“å‰ç»„å†…æ— æˆå‘˜ï¼Œ ä½†æ˜¯å¯èƒ½å­˜åœ¨ Consumer Group å·²æäº¤çš„ä½ç§»æ•°æ®ï¼Œä¸”æœªè¿‡æœŸï¼Œè¿™ç§çŠ¶æ€åªèƒ½å“åº” JoinGroup è¯·æ±‚ã€‚")]),a._v(" "),s("ul",[s("li",[a._v("DeadçŠ¶æ€")])]),a._v(" "),s("p",[a._v("â€‹    Dead çŠ¶æ€è¡¨ç¤ºç»„å†…å·²ç»æ²¡æœ‰ä»»ä½•æˆå‘˜çš„çŠ¶æ€ï¼Œç»„å†…çš„å…ƒæ•°æ®å·²ç»è¢« Broker Coordinator ç§»é™¤ï¼Œè¿™ç§çŠ¶æ€å“åº”å„ç§è¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªResponseï¼šUNKNOWN_MEMBER_IDã€‚")]),a._v(" "),s("ul",[s("li",[a._v("PreparingRebalance")])]),a._v(" "),s("p",[a._v("â€‹     PreparingRebalance çŠ¶æ€è¡¨ç¤ºå‡†å¤‡å¼€å§‹æ–°çš„ Rebalance, ç­‰å¾…ç»„å†…æ‰€æœ‰æˆå‘˜é‡æ–°åŠ å…¥ç»„å†…")]),a._v(" "),s("ul",[s("li",[a._v("CompletingRebalance")])]),a._v(" "),s("p",[a._v("â€‹     CompletingRebalance çŠ¶æ€è¡¨ç¤ºç»„å†…æˆå‘˜éƒ½å·²ç»åŠ å…¥æˆåŠŸï¼Œæ­£åœ¨ç­‰å¾…åˆ†é…æ–¹æ¡ˆï¼Œæ—§ç‰ˆæœ¬ä¸­å«â€œAwaitingSyncâ€ã€‚")]),a._v(" "),s("ul",[s("li",[a._v("Stable")])]),a._v(" "),s("p",[a._v("â€‹     Stable çŠ¶æ€è¡¨ç¤º Rebalance å·²ç»å®Œæˆï¼Œ ç»„å†… Consumer å¯ä»¥å¼€å§‹æ¶ˆè´¹äº†ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668575562977-8f03d7d7-e56b-4cca-a82e-075e4a3cbd56.png",alt:"img"}})]),a._v(" "),s("h2",{attrs:{id:"_6-rebalanceæµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-rebalanceæµç¨‹"}},[a._v("#")]),a._v(" 6. rebalanceæµç¨‹")]),a._v(" "),s("p",[s("strong",[a._v("Rebalance ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šåŠ å…¥ç»„(å¯¹åº”JoinGroupè¯·æ±‚)å’Œç­‰å¾… Leader Consumer åˆ†é…æ–¹æ¡ˆ(SyncGroup è¯·æ±‚)ã€‚")])]),a._v(" "),s("p",[a._v("â€‹      1)ã€JoinGroup è¯·æ±‚: ç»„å†…æ‰€æœ‰æˆå‘˜å‘ Coordinator å‘é€ JoinGroup è¯·æ±‚ï¼Œè¯·æ±‚åŠ å…¥ç»„ï¼Œé¡ºå¸¦ä¼šä¸ŠæŠ¥è‡ªå·±è®¢é˜…çš„ Topicï¼Œè¿™æ · Coordinator å°±èƒ½æ”¶é›†åˆ°æ‰€æœ‰æˆå‘˜çš„ JoinGroup è¯·æ±‚å’Œè®¢é˜… Topic ä¿¡æ¯ï¼ŒCoordinator å°±ä¼šä»è¿™äº›æˆå‘˜ä¸­é€‰æ‹©ä¸€ä¸ªæ‹…ä»»è¿™ä¸ªConsumer Group çš„ Leader(ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªå‘é€è¯·æ±‚çš„ Consumer ä¼šæˆä¸º Leader)ï¼Œ"),s("strong",[a._v("è¿™é‡Œè¯´çš„Leader æ˜¯æŒ‡å…·ä½“çš„æŸä¸€ä¸ª consumerï¼Œå®ƒçš„ä»»åŠ¡å°±æ˜¯æ”¶é›†æ‰€æœ‰æˆå‘˜çš„è®¢é˜… Topic ä¿¡æ¯ï¼Œç„¶ååˆ¶å®šå…·ä½“çš„æ¶ˆè´¹åˆ†åŒºåˆ†é…æ–¹æ¡ˆ")]),a._v("ã€‚å¾…é€‰å‡º Leader åï¼ŒCoordinator ä¼šæŠŠ Consumer Group çš„è®¢é˜… Topic ä¿¡æ¯å°è£…è¿› JoinGroup è¯·æ±‚çš„ Response ä¸­ï¼Œç„¶åå‘ç»™ Leader ï¼Œç„¶åç”± Leader ç»Ÿä¸€åšå‡ºåˆ†é…æ–¹æ¡ˆåï¼Œè¿›å…¥åˆ°ä¸‹ä¸€æ­¥ï¼Œå¦‚ä¸‹å›¾ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668590822857-0d81e9fa-b534-4572-815d-dd979c1f8db8.png",alt:"img"}}),a._v("       2)ã€SyncGroup è¯·æ±‚:  Leader å¼€å§‹åˆ†é…æ¶ˆè´¹æ–¹æ¡ˆï¼Œ"),s("strong",[a._v("å³å“ªä¸ª Consumer è´Ÿè´£æ¶ˆè´¹å“ªäº› Topic çš„å“ªäº› Partition")]),a._v("ã€‚ä¸€æ—¦å®Œæˆåˆ†é…ï¼ŒLeader ä¼šå°†è¿™ä¸ªåˆ†é…æ–¹æ¡ˆå°è£…è¿› SyncGroup è¯·æ±‚ä¸­å‘ç»™ Coordinator ï¼Œå…¶ä»–æˆå‘˜ä¹Ÿä¼šå‘ SyncGroup è¯·æ±‚ï¼Œåªæ˜¯å†…å®¹ä¸ºç©ºï¼Œå¾… Coordinator æ¥æ”¶åˆ°åˆ†é…æ–¹æ¡ˆä¹‹åä¼šæŠŠæ–¹æ¡ˆå°è£…è¿› SyncGroup çš„ Response ä¸­å‘ç»™ç»„å†…å„æˆå‘˜, è¿™æ ·å„è‡ªå°±çŸ¥é“åº”è¯¥æ¶ˆè´¹å“ªäº› Partition äº†ï¼Œå¦‚ä¸‹å›¾ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668591086594-e25241e5-3e96-4f7a-938b-0f68f8504564.png",alt:"img"}})]),a._v(" "),s("p",[s("strong",[a._v("Rebalanceåœºæ™¯åˆ†æ")])]),a._v(" "),s("p",[s("strong",[a._v("â‘ ")]),a._v("åœºæ™¯ä¸€ï¼šæ–°æˆå‘˜(c1)åŠ å…¥ç»„")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668591467645-e3668365-df35-4413-9be6-26ba0d12a949.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â‘¡ åœºæ™¯äºŒï¼šæˆå‘˜(c2)ä¸»åŠ¨ç¦»ç»„")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668591630215-5af9a2dc-b0a7-4a5e-bb32-e9ad89712bd6.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â‘¢       åœºæ™¯ä¸‰ï¼šæˆå‘˜(c2)è¶…æ—¶è¢«è¸¢å‡ºç»„")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668591664874-ec3489ff-6887-4b60-84b7-4a981130a643.png",alt:"img"}})]),a._v(" "),s("p",[a._v("â‘£ åœºæ™¯å››ï¼šæˆå‘˜(c2)æäº¤ä½ç§»æ•°æ®")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668591677500-e1e32eb3-1c58-43b1-9c86-f69bd189e922.png",alt:"img"}})]),a._v(" "),s("p",[a._v("åœ¨è¶…æ—¶å‰ï¼Œå®Œæˆä½ç§»çš„æäº¤")]),a._v(" "),s("p",[a._v("rebalanceä¼šäº§ç”Ÿå“ªäº›é—®é¢˜ï¼Ÿ")]),a._v(" "),s("p",[a._v("ä¸‰ã€rebalanceçš„å½±å“")]),a._v(" "),s("p",[a._v("Rebalanceå¯¹æˆ‘ä»¬æ•°æ®çš„å½±å“ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š")]),a._v(" "),s("p",[a._v("1ã€å¯èƒ½é‡å¤æ¶ˆè´¹: Consumerè¢«è¸¢å‡ºæ¶ˆè´¹ç»„ï¼Œå¯èƒ½è¿˜æ²¡æœ‰æäº¤offsetï¼ŒRebalanceæ—¶ä¼šPartitioné‡æ–°åˆ†é…å…¶å®ƒConsumer,ä¼šé€ æˆé‡å¤æ¶ˆè´¹ï¼Œè™½æœ‰å¹‚ç­‰æ“ä½œä½†è€—è´¹æ¶ˆè´¹èµ„æºï¼Œäº¦å¢åŠ é›†ç¾¤å‹åŠ›")]),a._v(" "),s("p",[a._v("2ã€é›†ç¾¤ä¸ç¨³å®šï¼šRebalanceæ‰©æ•£åˆ°æ•´ä¸ªConsumerGroupçš„æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œå› ä¸ºä¸€ä¸ªæ¶ˆè´¹è€…çš„é€€å‡ºï¼Œå¯¼è‡´æ•´ä¸ªGroupè¿›è¡Œäº†Rebalanceï¼Œå¹¶åœ¨ä¸€ä¸ªæ¯”è¾ƒæ…¢çš„æ—¶é—´å†…è¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œå½±å“é¢è¾ƒå¤§")]),a._v(" "),s("p",[a._v("3ã€å½±å“æ¶ˆè´¹é€Ÿåº¦ï¼šé¢‘ç¹çš„Rebalanceåè€Œé™ä½äº†æ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨é‡å¤æ¶ˆè´¹å’ŒRebalance")]),a._v(" "),s("h2",{attrs:{id:"_7-consumerä¹‹ä½ç§»æäº¤æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-consumerä¹‹ä½ç§»æäº¤æœºåˆ¶"}},[a._v("#")]),a._v(" 7. Consumerä¹‹ä½ç§»æäº¤æœºåˆ¶")]),a._v(" "),s("p",[a._v("ä¸Šé¢èŠå®Œæ¶ˆè´¹è€…ç»„ Rebalance æœºåˆ¶åï¼Œæˆ‘ä»¬æ¥èŠèŠ Consumer çš„ä½ç§»æäº¤æœºåˆ¶ï¼Œåœ¨èŠä½ç§»æäº¤ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ "),s("strong",[a._v("ä½ç§»")]),a._v(" å’Œ "),s("strong",[a._v("æ¶ˆè´¹è€…ä½ç§»")]),a._v(" ä¹‹é—´çš„åŒºåˆ«ã€‚é€šå¸¸æ‰€è¯´çš„ä½ç§»æ˜¯æŒ‡ Topic Partition åœ¨ Broker ç«¯çš„å­˜å‚¨åç§»é‡ï¼Œè€Œæ¶ˆè´¹è€…ä½ç§»åˆ™æ˜¯æŒ‡æŸä¸ª Consumer Group åœ¨ä¸åŒ Topic Partition ä¸Šé¢çš„æ¶ˆè´¹åç§»é‡ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¶ˆè´¹è¿›åº¦ï¼‰ï¼Œ"),s("strong",[a._v("å®ƒè®°å½•äº† Consumer è¦æ¶ˆè´¹çš„ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»")]),a._v("ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("Consumer éœ€è¦å‘ Kafka ä¸ŠæŠ¥è‡ªå·±çš„ä½ç§»æ•°æ®ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªä¸ŠæŠ¥è¿‡ç¨‹å«åšæäº¤ä½ç§»ï¼ˆCommitting Offsetsï¼‰")]),a._v("ã€‚å®ƒæ˜¯ä¸ºäº†ä¿è¯ Consumerçš„æ¶ˆè´¹è¿›åº¦æ­£å¸¸ï¼Œå½“ Consumer å‘ç”Ÿæ•…éšœé‡å¯åï¼Œ å¯ä»¥ç›´æ¥ä»ä¹‹å‰æäº¤çš„ Offset ä½ç½®å¼€å§‹è¿›è¡Œæ¶ˆè´¹è€Œä¸ç”¨é‡å¤´å†æ¥ä¸€éï¼ˆKafka è®¤ä¸ºå°äºæäº¤çš„ Offset çš„æ¶ˆæ¯éƒ½å·²ç»æˆåŠŸæ¶ˆè´¹äº†ï¼‰ï¼ŒKafka è®¾è®¡äº†è¿™ä¸ªæœºåˆ¶æ¥ä¿éšœæ¶ˆè´¹è¿›åº¦ã€‚"),s("strong",[a._v("æˆ‘ä»¬çŸ¥é“ Consumer å¯ä»¥åŒæ—¶å»æ¶ˆè´¹å¤šä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œæ‰€ä»¥ä½ç§»æäº¤æ˜¯æŒ‰ç…§åˆ†åŒºçš„ç²’åº¦è¿›è¡Œä¸ŠæŠ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´")]),a._v(" "),s("strong",[a._v("Consumer éœ€è¦ä¸ºåˆ†é…ç»™å®ƒçš„æ¯ä¸ªåˆ†åŒºæäº¤å„è‡ªçš„ä½ç§»æ•°æ®ã€‚")])]),a._v(" "),s("h2",{attrs:{id:"_8-ä½ç§»æäº¤çš„æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-ä½ç§»æäº¤çš„æ–¹å¼"}},[a._v("#")]),a._v(" 8.ä½ç§»æäº¤çš„æ–¹å¼")]),a._v(" "),s("p",[s("strong",[a._v("è‡ªåŠ¨æäº¤äº§ç”Ÿçš„æ¶ˆæ¯ä¸¢å¤±å’Œæ¶ˆæ¯é‡å¤é—®é¢˜")])]),a._v(" "),s("p",[a._v("ä»ç”¨æˆ·çš„è§’åº¦ï¼šè‡ªåŠ¨æäº¤ã€æ‰‹åŠ¨æäº¤")]),a._v(" "),s("p",[a._v("ä»kafkaè§’åº¦ï¼šåŒæ­¥æäº¤ã€å¼‚æ­¥æäº¤")]),a._v(" "),s("p",[a._v("â‘ è‡ªåŠ¨æäº¤")]),a._v(" "),s("p",[s("strong",[a._v("è‡ªåŠ¨æäº¤æ˜¯æŒ‡")]),a._v(" **Kafka Consumer åœ¨åå°é»˜é»˜åœ°å¸®æˆ‘ä»¬æäº¤ä½ç§»ï¼Œç”¨æˆ·ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªäº‹æƒ…ã€‚**å¯ç”¨è‡ªåŠ¨æäº¤ä½ç§»ï¼Œåœ¨ åˆå§‹åŒ– KafkaConsumer çš„æ—¶å€™ï¼Œé€šè¿‡è®¾ç½®å‚æ•° "),s("strong",[a._v("enable.auto.commit = true")]),a._v(" (é»˜è®¤ä¸ºtrue)ï¼Œå¼€å¯ä¹‹åè¿˜éœ€è¦å¦å¤–ä¸€ä¸ªå‚æ•°è¿›è¡Œé…åˆå³ "),s("strong",[a._v("auto.commit.interval.ms")]),a._v("ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤º Kafka Consumer æ¯éš” X ç§’è‡ªåŠ¨æäº¤ä¸€æ¬¡ä½ç§»ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯5ç§’ã€‚")]),a._v(" "),s("p",[a._v("è‡ªåŠ¨æäº¤çœ‹èµ·æ¥æ˜¯æŒºç¾å¥½çš„, é‚£ä¹ˆ**è‡ªåŠ¨æäº¤ä¼šä¸ä¼šå‡ºç°æ¶ˆè´¹æ•°æ®ä¸¢å¤±çš„æƒ…å†µå‘¢ï¼Ÿ**åœ¨è®¾ç½®äº† "),s("strong",[a._v("enable.auto.commit = true")]),a._v(" çš„æ—¶å€™ï¼ŒKafka ä¼šä¿è¯åœ¨å¼€å§‹è°ƒç”¨ Poll() æ–¹æ³•æ—¶ï¼Œæäº¤ä¸Šä¸€æ‰¹æ¶ˆæ¯çš„ä½ç§»ï¼Œå†å¤„ç†ä¸‹ä¸€æ‰¹æ¶ˆæ¯, å› æ­¤å®ƒèƒ½ä¿è¯ä¸å‡ºç°æ¶ˆè´¹ä¸¢å¤±çš„æƒ…å†µã€‚")]),a._v(" "),s("p",[a._v("å…¶å®ä¹Ÿè¿˜æ˜¯ä¼š"),s("strong",[a._v("å‡ºç°æ¶ˆæ¯ä¸¢å¤±")]),a._v("çš„æƒ…å†µï¼Œæ¯”å¦‚consumeræ‹‰å–0-100æ¡ä¿¡æ¯ï¼Œè‡ªåŠ¨æäº¤é—´éš”ä¸º5sï¼Œå½“è¿‡å»5såï¼Œæ¶ˆè´¹è€…æäº¤ä½ç§»101ï¼Œä½†æ˜¯åªå¤„ç†äº†é€»è¾‘50æ¡ï¼Œå¦‚æœæ­¤æ—¶consumerå®•æœºï¼Œä¸‹æ¬¡æ‹‰å–æ•°æ®æ˜¯ä»101å¼€å§‹ï¼Œé‚£ä¹ˆ51-100çš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼Œå› ä¸ºè¿™äº›æ•°æ®æ²¡æœ‰è¢«é€»è¾‘å¤„ç†è¿‡ã€‚")]),a._v(" "),s("p",[a._v("ä½†"),s("strong",[a._v("è‡ªåŠ¨æäº¤ä½ç§»ä¹Ÿæœ‰è®¾è®¡ç¼ºé™·ï¼Œé‚£å°±æ˜¯å®ƒå¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹")]),a._v("ã€‚"),s("strong",[a._v("å°±æ˜¯åœ¨è‡ªåŠ¨æäº¤é—´éš”ä¹‹é—´å‘ç”Ÿ Rebalance çš„æ—¶å€™ï¼Œæ­¤æ—¶ Offset è¿˜æœªæäº¤ï¼Œå¾… Rebalance å®Œæˆåï¼Œ æ‰€æœ‰ Consumer éœ€è¦å°†å‘ç”Ÿ Rebalance å‰çš„æ¶ˆæ¯è¿›è¡Œé‡æ–°æ¶ˆè´¹ä¸€æ¬¡ã€‚")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒConsumer æ¯ 5 ç§’è‡ªåŠ¨æäº¤ä¸€æ¬¡ä½ç§»ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾æäº¤ä½ç§»ä¹‹åçš„ 3 ç§’å‘ç”Ÿäº† Rebalance æ“ä½œã€‚åœ¨ Rebalance ä¹‹åï¼Œæ‰€æœ‰ Consumer ä»ä¸Šä¸€æ¬¡æäº¤çš„ä½ç§»å¤„ç»§ç»­æ¶ˆè´¹ï¼Œä½†è¯¥ä½ç§»å·²ç»æ˜¯ 3 ç§’å‰çš„ä½ç§»æ•°æ®äº†ï¼Œæ•…åœ¨ Rebalance å‘ç”Ÿå‰ 3 ç§’æ¶ˆè´¹çš„æ‰€æœ‰æ•°æ®éƒ½è¦é‡æ–°å†æ¶ˆè´¹ä¸€æ¬¡ã€‚è™½ç„¶ä½ èƒ½å¤Ÿé€šè¿‡å‡å°‘ auto.commit.interval.ms çš„å€¼æ¥æé«˜æäº¤é¢‘ç‡ï¼Œä½†è¿™ä¹ˆåšåªèƒ½ç¼©å°é‡å¤æ¶ˆè´¹çš„æ—¶é—´çª—å£ï¼Œä¸å¯èƒ½å®Œå…¨æ¶ˆé™¤å®ƒã€‚è¿™æ˜¯è‡ªåŠ¨æäº¤æœºåˆ¶çš„ä¸€ä¸ªç¼ºé™·ã€‚\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("â‘¡æ‰‹åŠ¨æäº¤")])]),a._v(" "),s("p",[a._v("ä¸è‡ªåŠ¨æäº¤ç›¸å¯¹åº”çš„å°±æ˜¯æ‰‹åŠ¨æäº¤äº†ã€‚å¼€å¯æ‰‹åŠ¨æäº¤ä½ç§»çš„æ–¹æ³•å°±æ˜¯åœ¨åˆå§‹åŒ–KafkaConsumer çš„æ—¶å€™è®¾ç½®å‚æ•° **enable.auto.commit = falseï¼Œ**ä½†æ˜¯åªè®¾ç½®ä¸º false è¿˜ä¸è¡Œï¼Œå®ƒåªæ˜¯å‘Šè¯‰ Kafka Consumer ä¸ç”¨è‡ªåŠ¨æäº¤ä½ç§»äº†ï¼Œä½ è¿˜éœ€è¦åœ¨å¤„ç†å®Œæ¶ˆæ¯ä¹‹åè°ƒç”¨ç›¸åº”çš„  Consumer API æ‰‹åŠ¨è¿›è¡Œæäº¤ä½ç§»ï¼Œ"),s("strong",[a._v("å¯¹äºæ‰‹åŠ¨æäº¤ä½ç§»ï¼Œåˆåˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ã€‚")])]),a._v(" "),s("p",[s("strong",[a._v("1)ã€åŒæ­¥æäº¤APIï¼š")])]),a._v(" "),s("p",[a._v("**KafkaConsumer#commitSync()ï¼Œ**è¯¥æ–¹æ³•ä¼šæäº¤ç”± KafkaConsumer#poll() æ–¹æ³•è¿”å›çš„æœ€æ–°ä½ç§»å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼Œä¼šä¸€ç›´é˜»å¡ç­‰å¾…ç›´åˆ°ä½ç§»è¢«æˆåŠŸæäº¤æ‰è¿”å›ï¼Œå¦‚æœæäº¤çš„è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œè¯¥æ–¹æ³•ä¼šå°†å¼‚å¸¸æŠ›å‡ºã€‚è¿™é‡Œæˆ‘ä»¬çŸ¥é“åœ¨è°ƒç”¨ "),s("strong",[a._v("commitSync() æ–¹æ³•çš„æ—¶æœº")]),a._v("æ˜¯åœ¨å¤„ç†å®Œ Poll() æ–¹æ³•è¿”å›æ‰€æœ‰æ¶ˆæ¯ä¹‹åè¿›è¡Œæäº¤ï¼Œå¦‚æœè¿‡æ—©çš„æäº¤äº†ä½ç§»å°±ä¼šå‡ºç°æ¶ˆè´¹æ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚")]),a._v(" "),s("p",[s("strong",[a._v("2)ã€å¼‚æ­¥æäº¤APIï¼š")])]),a._v(" "),s("p",[a._v("**KafkaConsumer#commitAsync()ï¼Œ**è¯¥æ–¹æ³•æ˜¯å¼‚æ­¥æ–¹å¼è¿›è¡Œæäº¤çš„ï¼Œè°ƒç”¨ commitAsync() ä¹‹åï¼Œå®ƒä¼šç«‹å³è¿”å›ï¼Œå¹¶ä¸ä¼šé˜»å¡ï¼Œå› æ­¤ä¸ä¼šå½±å“ Consumer çš„ TPSã€‚å¦å¤– Kafka é’ˆå¯¹å®ƒæä¾›äº†callbackï¼Œæ–¹ä¾¿æˆ‘ä»¬æ¥å®ç°æäº¤ä¹‹åçš„é€»è¾‘ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—æˆ–å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œ å‡å¦‚å‡ºç°é—®é¢˜æ˜¯ä¸ä¼šè¿›è¡Œé‡è¯•çš„ï¼Œè¿™æ—¶å€™é‡è¯•ä½ç§»å€¼å¯èƒ½å·²ä¸æ˜¯æœ€æ–°å€¼ï¼Œæ‰€ä»¥é‡è¯•æ— æ„ä¹‰ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("3)ã€æ··åˆæäº¤æ¨¡å¼ï¼š")])]),a._v(" "),s("p",[a._v("**ä»ä¸Šé¢åˆ†æå¯ä»¥å¾—å‡º commitSync å’Œ commitAsync éƒ½æœ‰è‡ªå·±çš„ç¼ºé™·ï¼Œ**æˆ‘ä»¬éœ€è¦å°† commitSync å’Œ commitAsync ç»„åˆä½¿ç”¨æ‰èƒ½åˆ°è¾¾æœ€ç†æƒ³çš„æ•ˆæœï¼Œæ—¢ä¸å½±å“ Consumer TPSï¼Œåˆèƒ½åˆ©ç”¨ commitSync çš„è‡ªåŠ¨é‡è¯•åŠŸèƒ½æ¥é¿å…ä¸€äº›ç¬æ—¶é”™è¯¯ï¼ˆç½‘ç»œæŠ–åŠ¨ï¼ŒGCï¼ŒRebalance é—®é¢˜)ï¼Œ"),s("strong",[a._v("åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®å¤§å®¶ä½¿ç”¨æ··åˆæäº¤æ¨¡å¼æ¥æé«˜ Consumerçš„å¥å£®æ€§")]),a._v("ã€‚")]),a._v(" "),s("h2",{attrs:{id:"_9-consumer-offsetså­˜å‚¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-consumer-offsetså­˜å‚¨"}},[a._v("#")]),a._v(" 9. __consumer_offsetså­˜å‚¨")]),a._v(" "),s("p",[s("strong",[a._v("kafkaé«˜ç‰ˆæœ¬ä¸­ä¸ºä»€ä¹ˆå°†ä½ç§»æäº¤ä¿¡æ¯æ”¾åœ¨kafkaä¸­ï¼Ÿ")])]),a._v(" "),s("p",[a._v("æ¶ˆè´¹è€…æ¶ˆè´¹å®Œæ•°æ®åéœ€è¦æäº¤ä½ç§»ï¼Œé‚£ä¹ˆå°†ä½ç§»æäº¤åœ¨å“ªå„¿å‘¢ï¼Ÿä»¥ä½•ç§æ–¹å¼å­˜å‚¨å‘¢ï¼Ÿ")]),a._v(" "),s("p",[a._v("æˆ‘ä»¬çŸ¥é“ Kafka æ—§ç‰ˆæœ¬ï¼ˆ0.8ç‰ˆæœ¬ä¹‹å‰ï¼‰æ˜¯é‡åº¦ä¾èµ– Zookeeper æ¥å®ç°å„ç§å„æ ·çš„åè°ƒç®¡ç†ï¼Œå½“ç„¶æ—§ç‰ˆæœ¬çš„ Consumer Group æ˜¯æŠŠä½ç§»ä¿å­˜åœ¨ ZooKeeper ä¸­ï¼Œå‡å°‘ Broker ç«¯çŠ¶æ€å­˜å‚¨å¼€é”€ï¼Œé‰´äº Zookeeper çš„å­˜å‚¨æ¶æ„è®¾è®¡æ¥è¯´ï¼Œ å®ƒä¸é€‚åˆé¢‘ç¹å†™æ›´æ–°ï¼Œè€Œ Consumer Group çš„ä½ç§»æäº¤åˆæ˜¯é«˜é¢‘å†™æ“ä½œï¼Œè¿™æ ·ä¼šæ‹–æ…¢ ZooKeeper é›†ç¾¤çš„æ€§èƒ½ï¼Œ "),s("strong",[a._v("äºæ˜¯åœ¨æ–°ç‰ˆ Kafka ä¸­ï¼Œ ç¤¾åŒºé‡æ–°è®¾è®¡äº† Consumer Group çš„ä½ç§»ç®¡ç†æ–¹å¼ï¼Œé‡‡ç”¨äº†å°†ä½ç§»ä¿å­˜åœ¨ Kafka å†…éƒ¨ï¼ˆè¿™æ˜¯å› ä¸º Kafka Topic å¤©ç„¶æ”¯æŒé«˜é¢‘å†™ä¸”æŒä¹…åŒ–ï¼‰ï¼Œè¿™å°±æ˜¯æ‰€è°“å¤§åé¼é¼çš„__consumer_offsets")]),a._v("ã€‚")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("__consumer_offsetsï¼šç”¨æ¥ä¿å­˜ Kafka Consumer æäº¤çš„ä½ç§»ä¿¡æ¯ï¼Œå¦å¤–å®ƒæ˜¯ç”± Kafka è‡ªåŠ¨åˆ›å»ºçš„ï¼Œå’Œæ™®é€šçš„ Topic ç›¸åŒï¼Œå®ƒçš„æ¶ˆæ¯æ ¼å¼ä¹Ÿæ˜¯ Kafka è‡ªå·±å®šä¹‰çš„ï¼Œæˆ‘ä»¬æ— æ³•è¿›è¡Œä¿®æ”¹ã€‚è¿™é‡Œæˆ‘ä»¬å¾ˆå¥½å¥‡å®ƒçš„æ¶ˆæ¯æ ¼å¼ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ ·çš„ï¼Œè®©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æå¹¶æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±å§ã€‚\n")])])]),s("p",[s("strong",[a._v("å…·ä½“çš„æ¶ˆæ¯æ ¼å¼ï¼š")])]),a._v(" "),s("ol",[s("li",[a._v("æ‰€è°“çš„æ¶ˆæ¯æ ¼å¼æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯ä¸€ä¸ª KV å¯¹ã€‚Key å’Œ Value åˆ†åˆ«è¡¨ç¤ºæ¶ˆæ¯çš„é”®å€¼å’Œæ¶ˆæ¯ä½“ã€‚")]),a._v(" "),s("li",[a._v("é‚£ä¹ˆ Key å­˜ä»€ä¹ˆå‘¢ï¼Ÿæ—¢ç„¶æ˜¯å­˜å‚¨ Consumer çš„ä½ç§»ä¿¡æ¯ï¼Œåœ¨ Kafka ä¸­ï¼ŒConsumer æ•°é‡ä¼šå¾ˆå¤šï¼Œé‚£ä¹ˆå¿…é¡»æœ‰å­—æ®µæ¥æ ‡è¯†è¿™ä¸ªä½ç§»æ•°æ®æ˜¯å±äºå“ªä¸ª Consumerçš„ï¼Œæ€ä¹ˆæ¥æ ‡è¯† Consumer å­—æ®µå‘¢ï¼Ÿå‰é¢åœ¨è®²è§£ Consumer Group çš„æ—¶å€™æˆ‘ä»¬çŸ¥é“å®ƒå…±äº«ä¸€ä¸ªå…¬å…±ä¸”å”¯ä¸€çš„"),s("strong",[a._v("Group ID")]),a._v("ï¼Œé‚£ä¹ˆåªä¿å­˜å®ƒå°±å¯ä»¥äº†å—ï¼Ÿæˆ‘ä»¬çŸ¥é“ Consumer æäº¤ä½ç§»æ˜¯åœ¨åˆ†åŒºçš„ç»´åº¦è¿›è¡Œçš„ï¼Œå¾ˆæ˜¾ç„¶ï¼Œkeyä¸­è¿˜åº”è¯¥ä¿å­˜ Consumer è¦æäº¤ä½ç§»çš„åˆ†åŒºã€‚")]),a._v(" "),s("li",[a._v("æ€»ç»“ï¼š"),s("strong",[a._v("ä½ç§»ä¸»é¢˜çš„ Key ä¸­åº”è¯¥ä¿å­˜ 3 éƒ¨åˆ†å†…å®¹ï¼š<Group IDï¼Œä¸»é¢˜åï¼Œåˆ†åŒºå· >")])])]),a._v(" "),s("p",[s("strong",[a._v("è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œå‰é¢æˆ‘ä»¬é¡µè¯´æ˜äº†æ¯ä¸ªæ¶ˆè´¹è€…ä¼šæäº¤å…¶æ¶ˆè´¹çš„æ‰€æœ‰partionçš„ä½ç§»ã€‚å³æ‰€æœ‰æ¶ˆè´¹éƒ½æ˜¯ä»partionä¸­å–æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è®°å½•å…·ä½“æŸä¸ªæ¶ˆè´¹è€…çš„ä¿¡æ¯ï¼Œåªéœ€è¦è®°å½•æ¶ˆè´¹è€…ç»„çš„ä¿¡æ¯ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…åªéœ€è¦æ‹¿åˆ°å½“å‰æ¶ˆè´¹è€…ç»„idä»¥åŠå…¶è®¢é˜…çš„topicå’Œè‡ªå·±å¯¹åº”çš„partionï¼Œå°±å¯ä»¥çŸ¥é“å½“å‰æ¶ˆè´¹è€…åº”è¯¥æ¶ˆè´¹å“ªæ¡æ¶ˆæ¯ã€‚")])]),a._v(" "),s("ol",[s("li",[a._v("value å¯ä»¥ç®€å•è®¤ä¸ºå­˜å‚¨çš„æ˜¯offsetå€¼ï¼Œå½“ç„¶åº•å±‚è¿˜å­˜å‚¨å…¶ä»–ä¸€äº›å…ƒæ•°æ®ï¼Œå¸®åŠ© Kafka æ¥å®Œæˆä¸€äº›å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚åˆ é™¤è¿‡æœŸä½ç§»æ•°æ®ç­‰ã€‚")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668610100305-0c4f0ca5-983c-43b9-9a33-4da023727074.png",alt:"img"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668610106458-8e053b3b-7e76-4120-93d8-2257a125bbe1.png",alt:"img"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/29475739/1668610110692-9115d6ed-e75a-4616-8092-73cd2adef72a.png",alt:"img"}})]),a._v(" "),s("h2",{attrs:{id:"_10-consumer-offsetsåˆ›å»ºè¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-consumer-offsetsåˆ›å»ºè¿‡ç¨‹"}},[a._v("#")]),a._v(" 10. __consumer_offsetsåˆ›å»ºè¿‡ç¨‹")]),a._v(" "),s("p",[a._v("èŠå®Œæ¶ˆæ¯æ ¼å¼åï¼Œ æˆ‘ä»¬æ¥èŠèŠ  "),s("strong",[a._v("__consumer_offsets æ˜¯æ€ä¹ˆè¢«åˆ›å»ºå‡ºæ¥çš„å‘¢ï¼Ÿ å½“ Kafka é›†ç¾¤ä¸­çš„ç¬¬ä¸€ä¸ª Consumer å¯åŠ¨æ—¶ï¼ŒKafka ä¼šè‡ªåŠ¨åˆ›å»º__consumer_offsets")]),a._v("ã€‚å‰é¢è¯´è¿‡ï¼Œå®ƒå°±æ˜¯æ™®é€šçš„ Topicï¼Œ å®ƒä¹Ÿæœ‰å¯¹åº”çš„åˆ†åŒºæ•°ï¼Œå¦‚æœç”± Kafka è‡ªåŠ¨åˆ›å»ºçš„ï¼Œé‚£ä¹ˆåˆ†åŒºæ•°åˆæ˜¯æ€ä¹ˆè®¾ç½®çš„å‘¢ï¼Ÿè¿™ä¸ªä¾èµ– "),s("strong",[a._v("Broker ç«¯å‚æ•° offsets.topic.num.partitions")]),a._v(" (é»˜è®¤å€¼æ˜¯50)ï¼Œå› æ­¤ Kafka ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæœ‰ 50 ä¸ªåˆ†åŒºçš„__consumer_offsets ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ Kafka æ—¥å¿—è·¯å¾„ä¸‹çœ‹åˆ°æœ‰å¾ˆå¤š __consumer_offsets-xxx è¿™æ ·çš„ç›®å½•çš„åŸå› ã€‚æ—¢ç„¶æœ‰åˆ†åŒºæ•°ï¼Œå¿…ç„¶å°±ä¼šæœ‰å¯¹åº”çš„å‰¯æœ¬æ•°ï¼Œè¿™ä¸ªæ˜¯ä¾èµ– Broker ç«¯å¦ä¸€ä¸ªå‚æ•° "),s("strong",[a._v("offsets.topic.replication.factor")]),a._v("(é»˜è®¤å€¼ä¸º3)ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œ"),s("strong",[a._v("å¦‚æœ__consumer_offsets ç”± Kafka è‡ªåŠ¨åˆ›å»ºçš„ï¼Œé‚£ä¹ˆè¯¥ Topic çš„åˆ†åŒºæ•°æ˜¯ 50ï¼Œå‰¯æœ¬æ•°æ˜¯ 3ï¼Œ"),s("strong",[a._v("è€Œå…·ä½“ Group çš„æ¶ˆè´¹æƒ…å†µè¦å­˜å‚¨åˆ°å“ªä¸ª Partition ï¼Œæ ¹æ®")]),a._v("abs(GroupId.hashCode()) % NumPartitions")]),a._v(" **æ¥è®¡ç®—çš„ï¼Œ**è¿™æ ·å°±å¯ä»¥ä¿è¯ Consumer Offset ä¿¡æ¯ä¸ Consumer Group å¯¹åº”çš„ Coordinator å¤„äºåŒä¸€ä¸ª Broker èŠ‚ç‚¹ä¸Šã€‚")]),a._v(" "),s("p",[a._v("æŸ¥çœ‹__consumer_offsetsæ•°æ®")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//1.æŸ¥çœ‹ kafka æ¶ˆè´¹è€…ç»„åˆ—è¡¨ï¼š")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("/bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("groups"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("list\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//2.æŸ¥çœ‹ kafka ä¸­æŸä¸€ä¸ªæ¶ˆè´¹è€…ç»„(test-group-1)çš„æ¶ˆè´¹æƒ…å†µï¼š")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("/bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("groups"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("group test"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("group"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("describe\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//3.è®¡ç®— group.id å¯¹åº”çš„ partition çš„å…¬å¼ä¸ºï¼š")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("abs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("GroupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NumPartitions")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//å…¶ä¸­GroupId:test-group-1 NumPartitions:50")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//3.æ‰¾åˆ° group.id å¯¹åº”çš„ partition åï¼Œå°±å¯ä»¥æŒ‡å®šåˆ†åŒºæ¶ˆè´¹äº†")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//kafka 0.11ä»¥å")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("/bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server message"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic __consumer_offsets "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("formatter "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kafka.coordinator.group.GroupMetadataManager\\$OffsetsMessageFormatter"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("partition xx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//kafka 0.11ä»¥å‰")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("/bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server message"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic __consumer_offsets "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("formatter "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kafka.coordinator.GroupMetadataManager\\$OffsetsMessageFormatter"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("partition xx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//4.è·å–æŒ‡å®šconsumer groupçš„ä½ç§»ä¿¡æ¯ ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//kafka 0.11ä»¥å")]),a._v("\nkafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("simple"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic __consumer_offsets "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("partition xx "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("broker"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("list "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("formatter "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kafka.coordinator.group.GroupMetadataManager\\$OffsetsMessageFormatter"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//kafka 0.11ä»¥å‰")]),a._v("\nkafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("simple"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic __consumer_offsets "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("partition xx "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("broker"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("list "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("formatter "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kafka.coordinator.GroupMetadataManager\\$OffsetsMessageFormatter"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//5.è„šæœ¬æ‰§è¡Œåè¾“å‡ºçš„å…ƒæ•°æ®ä¿¡æ¯ ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//æ ¼å¼ï¼š[æ¶ˆè´¹è€…ç»„ : æ¶ˆè´¹çš„topic : æ¶ˆè´¹çš„åˆ†åŒº] :: [offsetä½ç§»], [offsetæäº¤æ—¶é—´], [å…ƒæ•°æ®è¿‡æœŸæ—¶é—´]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("order"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("group"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("topic"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OffsetMetadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("36672")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NO_METADATA")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CommitTime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1633694193000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExpirationTime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1633866993000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br")])]),s("h2",{attrs:{id:"_11-consumeræ¶ˆè´¹è¿›åº¦ç›‘æ§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-consumeræ¶ˆè´¹è¿›åº¦ç›‘æ§"}},[a._v("#")]),a._v(" 11. consumeræ¶ˆè´¹è¿›åº¦ç›‘æ§")]),a._v(" "),s("p",[a._v("ä¸Šé¢èŠå®Œ Consumerçš„å„ä¸ªå®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬æ¥èŠèŠå¯¹äº Consumer æ¥è¯´ï¼Œæœ€é‡è¦çš„äº‹æƒ…å³"),s("strong",[a._v("æ¶ˆè´¹è¿›åº¦çš„ç›‘æ§")]),a._v(", æˆ–è€…è¯´"),s("strong",[a._v("ç›‘æ§å…¶æ»åç¨‹åº¦")]),a._v("ï¼ˆConsumer å½“å‰è½åäº Producer çš„ç¨‹åº¦ï¼‰ï¼Œè¿™é‡Œæœ‰ä¸ªä¸“ä¸šåè¯å« "),s("strong",[a._v("Consumer Lag")]),a._v("ã€‚ä¸¾ä¾‹è¯´æ˜: Kafka Producer å‘æŸ Topic æˆåŠŸç”Ÿäº§äº† 1000 ä¸‡æ¡æ¶ˆæ¯ï¼Œè¿™æ—¶ Consumer å½“å‰æ¶ˆè´¹äº† 900 ä¸‡æ¡æ¶ˆæ¯ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸º Consumer æ»åäº† 100 ä¸‡æ¡æ¶ˆæ¯ï¼Œå³ Lag ç­‰äº 100 ä¸‡ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("å¯¹ Consumer æ¥è¯´ï¼ŒLag åº”è¯¥ç®—æ˜¯æœ€é‡è¦çš„ç›‘æ§æŒ‡æ ‡äº†")]),a._v("ã€‚å®ƒç›´æ¥åæ˜ äº†ä¸€ä¸ª Consumer çš„è¿è¡Œæƒ…å†µã€‚Lag å€¼è¶Šå°è¡¨ç¤ºè¯¥ Consumer èƒ½å¤ŸåŠæ—¶çš„æ¶ˆè´¹ Producer ç”Ÿäº§å‡ºæ¥çš„æ¶ˆæ¯ï¼Œæ»åç¨‹åº¦å¾ˆå°ï¼›å¦‚æœè¯¥å€¼æœ‰å¢å¤§çš„è¶‹åŠ¿è¯´æ˜å¯èƒ½ä¼šæœ‰å †ç§¯ï¼Œä¸¥é‡ä¼šæ‹–æ…¢ä¸‹æ¸¸çš„å¤„ç†é€Ÿåº¦ã€‚")]),a._v(" "),s("p",[a._v("å¯¹äºè¿™ä¹ˆé‡è¦çš„æŒ‡æ ‡ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆç›‘æ§å®ƒå‘¢ï¼Ÿä¸»è¦æœ‰ ä»¥ä¸‹å‡  ç§æ–¹æ³•ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("ä½¿ç”¨ Kafka è‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…· kafka-consumer-groups è„šæœ¬")]),a._v(" "),s("li",[a._v("ä½¿ç”¨ Kafka Java Consumer API ç¼–ç¨‹")]),a._v(" "),s("li",[a._v("ä½¿ç”¨ Kafka è‡ªå¸¦çš„ JMX ç›‘æ§æŒ‡æ ‡")]),a._v(" "),s("li",[a._v("å¦‚æœæ˜¯äº‘äº§å“çš„è¯ï¼Œ å¯ä»¥ç›´æ¥ä½¿ç”¨äº‘äº§å“è‡ªå¸¦çš„ç›‘æ§åŠŸèƒ½")])])])}),[],!1,null,null,null);s.default=n.exports}}]);