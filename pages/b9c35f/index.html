<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>扣丁狼k8s（三）存储与配置 | baby sword‘s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="java后端技术总结，生活记录。个人笔记">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.53c04193.css" as="style"><link rel="preload" href="/assets/js/app.7d33bb02.js" as="script"><link rel="preload" href="/assets/js/2.15f2967d.js" as="script"><link rel="preload" href="/assets/js/351.df3bf6ec.js" as="script"><link rel="prefetch" href="/assets/js/10.dabe1a63.js"><link rel="prefetch" href="/assets/js/100.a2015101.js"><link rel="prefetch" href="/assets/js/101.86d0ebe4.js"><link rel="prefetch" href="/assets/js/102.9d17991d.js"><link rel="prefetch" href="/assets/js/103.d013e413.js"><link rel="prefetch" href="/assets/js/104.4580e90e.js"><link rel="prefetch" href="/assets/js/105.c98e8247.js"><link rel="prefetch" href="/assets/js/106.9512d8d6.js"><link rel="prefetch" href="/assets/js/107.dc6dd50f.js"><link rel="prefetch" href="/assets/js/108.36e17e32.js"><link rel="prefetch" href="/assets/js/109.952d543d.js"><link rel="prefetch" href="/assets/js/11.7ad42e2d.js"><link rel="prefetch" href="/assets/js/110.aae101ed.js"><link rel="prefetch" href="/assets/js/111.9ad19a52.js"><link rel="prefetch" href="/assets/js/112.0c3843ec.js"><link rel="prefetch" href="/assets/js/113.c5d4208b.js"><link rel="prefetch" href="/assets/js/114.09b4516e.js"><link rel="prefetch" href="/assets/js/115.8c6bacae.js"><link rel="prefetch" href="/assets/js/116.f6cb99af.js"><link rel="prefetch" href="/assets/js/117.d888ae3d.js"><link rel="prefetch" href="/assets/js/118.e1612eca.js"><link rel="prefetch" href="/assets/js/119.3b12ca64.js"><link rel="prefetch" href="/assets/js/12.d0f226ac.js"><link rel="prefetch" href="/assets/js/120.7bff079e.js"><link rel="prefetch" href="/assets/js/121.4e029ab8.js"><link rel="prefetch" href="/assets/js/122.f2575eb6.js"><link rel="prefetch" href="/assets/js/123.af6bedbe.js"><link rel="prefetch" href="/assets/js/124.1d9ff52d.js"><link rel="prefetch" href="/assets/js/125.8ce6c45b.js"><link rel="prefetch" href="/assets/js/126.74738876.js"><link rel="prefetch" href="/assets/js/127.469dca9c.js"><link rel="prefetch" href="/assets/js/128.733a2f9b.js"><link rel="prefetch" href="/assets/js/129.e3046663.js"><link rel="prefetch" href="/assets/js/13.ca9cb7b7.js"><link rel="prefetch" href="/assets/js/130.5f8a399c.js"><link rel="prefetch" href="/assets/js/131.f66f486f.js"><link rel="prefetch" href="/assets/js/132.3fcb4a90.js"><link rel="prefetch" href="/assets/js/133.e6a7cbf8.js"><link rel="prefetch" href="/assets/js/134.bc8d2a8b.js"><link rel="prefetch" href="/assets/js/135.240c78e9.js"><link rel="prefetch" href="/assets/js/136.008aca90.js"><link rel="prefetch" href="/assets/js/137.8bbcd666.js"><link rel="prefetch" href="/assets/js/138.bf695fc2.js"><link rel="prefetch" href="/assets/js/139.c00c9dc2.js"><link rel="prefetch" href="/assets/js/14.3885beda.js"><link rel="prefetch" href="/assets/js/140.1a2eba1e.js"><link rel="prefetch" href="/assets/js/141.c8600326.js"><link rel="prefetch" href="/assets/js/142.129fdc97.js"><link rel="prefetch" href="/assets/js/143.1bcbaa9c.js"><link rel="prefetch" href="/assets/js/144.77983828.js"><link rel="prefetch" href="/assets/js/145.18c96830.js"><link rel="prefetch" href="/assets/js/146.062c1576.js"><link rel="prefetch" href="/assets/js/147.4dffe67b.js"><link rel="prefetch" href="/assets/js/148.0a12fdd2.js"><link rel="prefetch" href="/assets/js/149.644d9858.js"><link rel="prefetch" href="/assets/js/15.981df7e3.js"><link rel="prefetch" href="/assets/js/150.3a56182c.js"><link rel="prefetch" href="/assets/js/151.abbd46e4.js"><link rel="prefetch" href="/assets/js/152.c54e620b.js"><link rel="prefetch" href="/assets/js/153.d9a8477a.js"><link rel="prefetch" href="/assets/js/154.c0737606.js"><link rel="prefetch" href="/assets/js/155.273b61be.js"><link rel="prefetch" href="/assets/js/156.ac322b48.js"><link rel="prefetch" href="/assets/js/157.29da92a5.js"><link rel="prefetch" href="/assets/js/158.20aa63c2.js"><link rel="prefetch" href="/assets/js/159.cb2bfda8.js"><link rel="prefetch" href="/assets/js/16.851e8b6c.js"><link rel="prefetch" href="/assets/js/160.c31eb98d.js"><link rel="prefetch" href="/assets/js/161.ba3b58c4.js"><link rel="prefetch" href="/assets/js/162.822b912d.js"><link rel="prefetch" href="/assets/js/163.fb89cac8.js"><link rel="prefetch" href="/assets/js/164.2ec85d97.js"><link rel="prefetch" href="/assets/js/165.80d69bc7.js"><link rel="prefetch" href="/assets/js/166.0734abd2.js"><link rel="prefetch" href="/assets/js/167.12b046ed.js"><link rel="prefetch" href="/assets/js/168.b0d4db24.js"><link rel="prefetch" href="/assets/js/169.238c1564.js"><link rel="prefetch" href="/assets/js/17.71993e7e.js"><link rel="prefetch" href="/assets/js/170.a20084f6.js"><link rel="prefetch" href="/assets/js/171.f7beebbd.js"><link rel="prefetch" href="/assets/js/172.edc29fbe.js"><link rel="prefetch" href="/assets/js/173.3fc5869c.js"><link rel="prefetch" href="/assets/js/174.82f26aa5.js"><link rel="prefetch" href="/assets/js/175.595120d6.js"><link rel="prefetch" href="/assets/js/176.05d37828.js"><link rel="prefetch" href="/assets/js/177.cd7feb20.js"><link rel="prefetch" href="/assets/js/178.a5982934.js"><link rel="prefetch" href="/assets/js/179.8c485f51.js"><link rel="prefetch" href="/assets/js/18.cba9194a.js"><link rel="prefetch" href="/assets/js/180.c219aac7.js"><link rel="prefetch" href="/assets/js/181.dfb84650.js"><link rel="prefetch" href="/assets/js/182.27cb275e.js"><link rel="prefetch" href="/assets/js/183.f163af9d.js"><link rel="prefetch" href="/assets/js/184.b18298e6.js"><link rel="prefetch" href="/assets/js/185.80fccb48.js"><link rel="prefetch" href="/assets/js/186.77df58b4.js"><link rel="prefetch" href="/assets/js/187.2ef89f60.js"><link rel="prefetch" href="/assets/js/188.fa837c00.js"><link rel="prefetch" href="/assets/js/189.28bd30b9.js"><link rel="prefetch" href="/assets/js/19.81dac5f4.js"><link rel="prefetch" href="/assets/js/190.29e7f541.js"><link rel="prefetch" href="/assets/js/191.0ba2207c.js"><link rel="prefetch" href="/assets/js/192.36dea193.js"><link rel="prefetch" href="/assets/js/193.cb147e1d.js"><link rel="prefetch" href="/assets/js/194.569ebd0a.js"><link rel="prefetch" href="/assets/js/195.fe0c4ebf.js"><link rel="prefetch" href="/assets/js/196.7943b4f0.js"><link rel="prefetch" href="/assets/js/197.15498b32.js"><link rel="prefetch" href="/assets/js/198.bf082825.js"><link rel="prefetch" href="/assets/js/199.f76dadbf.js"><link rel="prefetch" href="/assets/js/20.45d8ffc5.js"><link rel="prefetch" href="/assets/js/200.80915aee.js"><link rel="prefetch" href="/assets/js/201.0fcd5a5e.js"><link rel="prefetch" href="/assets/js/202.ac356c7f.js"><link rel="prefetch" href="/assets/js/203.8b9abdf7.js"><link rel="prefetch" href="/assets/js/204.ceb5d675.js"><link rel="prefetch" href="/assets/js/205.292242cf.js"><link rel="prefetch" href="/assets/js/206.2e9cbdce.js"><link rel="prefetch" href="/assets/js/207.7a9094b4.js"><link rel="prefetch" href="/assets/js/208.c7ad7eab.js"><link rel="prefetch" href="/assets/js/209.681223ee.js"><link rel="prefetch" href="/assets/js/21.7a9f257f.js"><link rel="prefetch" href="/assets/js/210.3bbf8260.js"><link rel="prefetch" href="/assets/js/211.5bd34e61.js"><link rel="prefetch" href="/assets/js/212.dc330741.js"><link rel="prefetch" href="/assets/js/213.3cc734f7.js"><link rel="prefetch" href="/assets/js/214.91079873.js"><link rel="prefetch" href="/assets/js/215.25a0181b.js"><link rel="prefetch" href="/assets/js/216.3cb6f681.js"><link rel="prefetch" href="/assets/js/217.0187eee5.js"><link rel="prefetch" href="/assets/js/218.bb486cfa.js"><link rel="prefetch" href="/assets/js/219.5ca601a6.js"><link rel="prefetch" href="/assets/js/22.6aa340ac.js"><link rel="prefetch" href="/assets/js/220.f2fbfd29.js"><link rel="prefetch" href="/assets/js/221.c343eb87.js"><link rel="prefetch" href="/assets/js/222.eccb8faf.js"><link rel="prefetch" href="/assets/js/223.b6ee70d7.js"><link rel="prefetch" href="/assets/js/224.049967fd.js"><link rel="prefetch" href="/assets/js/225.e5573f45.js"><link rel="prefetch" href="/assets/js/226.f6133f9b.js"><link rel="prefetch" href="/assets/js/227.1d2bb9be.js"><link rel="prefetch" href="/assets/js/228.92c248b8.js"><link rel="prefetch" href="/assets/js/229.2da9b7fb.js"><link rel="prefetch" href="/assets/js/23.a2a5f82e.js"><link rel="prefetch" href="/assets/js/230.1ed17ebe.js"><link rel="prefetch" href="/assets/js/231.f9a8d324.js"><link rel="prefetch" href="/assets/js/232.d073b6b8.js"><link rel="prefetch" href="/assets/js/233.bec9cdbd.js"><link rel="prefetch" href="/assets/js/234.cb6a1e28.js"><link rel="prefetch" href="/assets/js/235.ebb74d27.js"><link rel="prefetch" href="/assets/js/236.24044479.js"><link rel="prefetch" href="/assets/js/237.f7c04397.js"><link rel="prefetch" href="/assets/js/238.affa4a25.js"><link rel="prefetch" href="/assets/js/239.2b15684a.js"><link rel="prefetch" href="/assets/js/24.4f94869e.js"><link rel="prefetch" href="/assets/js/240.524a5283.js"><link rel="prefetch" href="/assets/js/241.a6f85fbc.js"><link rel="prefetch" href="/assets/js/242.a5012b0f.js"><link rel="prefetch" href="/assets/js/243.f2872f9d.js"><link rel="prefetch" href="/assets/js/244.af8dce4a.js"><link rel="prefetch" href="/assets/js/245.913dd95f.js"><link rel="prefetch" href="/assets/js/246.46085f09.js"><link rel="prefetch" href="/assets/js/247.cab3066d.js"><link rel="prefetch" href="/assets/js/248.6ffe9bd2.js"><link rel="prefetch" href="/assets/js/249.940ac997.js"><link rel="prefetch" href="/assets/js/25.8beba237.js"><link rel="prefetch" href="/assets/js/250.24f5729f.js"><link rel="prefetch" href="/assets/js/251.040b7687.js"><link rel="prefetch" href="/assets/js/252.fce23e02.js"><link rel="prefetch" href="/assets/js/253.6aa072a9.js"><link rel="prefetch" href="/assets/js/254.fced3292.js"><link rel="prefetch" href="/assets/js/255.81bdb3ab.js"><link rel="prefetch" href="/assets/js/256.eee8f018.js"><link rel="prefetch" href="/assets/js/257.258e3d5f.js"><link rel="prefetch" href="/assets/js/258.53764d35.js"><link rel="prefetch" href="/assets/js/259.44220dff.js"><link rel="prefetch" href="/assets/js/26.38f820a6.js"><link rel="prefetch" href="/assets/js/260.a78371e6.js"><link rel="prefetch" href="/assets/js/261.e47bec83.js"><link rel="prefetch" href="/assets/js/262.cdc1b042.js"><link rel="prefetch" href="/assets/js/263.83db8a83.js"><link rel="prefetch" href="/assets/js/264.2f01d4cb.js"><link rel="prefetch" href="/assets/js/265.e174d060.js"><link rel="prefetch" href="/assets/js/266.96c46fc6.js"><link rel="prefetch" href="/assets/js/267.b73d8242.js"><link rel="prefetch" href="/assets/js/268.a71f8ffc.js"><link rel="prefetch" href="/assets/js/269.d962ab34.js"><link rel="prefetch" href="/assets/js/27.7eb3747a.js"><link rel="prefetch" href="/assets/js/270.09b33473.js"><link rel="prefetch" href="/assets/js/271.68955791.js"><link rel="prefetch" href="/assets/js/272.c673e920.js"><link rel="prefetch" href="/assets/js/273.a5e8096c.js"><link rel="prefetch" href="/assets/js/274.9df9cd64.js"><link rel="prefetch" href="/assets/js/275.8ad49720.js"><link rel="prefetch" href="/assets/js/276.31c0a4dc.js"><link rel="prefetch" href="/assets/js/277.fb617ede.js"><link rel="prefetch" href="/assets/js/278.f0919232.js"><link rel="prefetch" href="/assets/js/279.ac800bcf.js"><link rel="prefetch" href="/assets/js/28.632f9819.js"><link rel="prefetch" href="/assets/js/280.f4c522e5.js"><link rel="prefetch" href="/assets/js/281.819aa80e.js"><link rel="prefetch" href="/assets/js/282.235df8a4.js"><link rel="prefetch" href="/assets/js/283.246395f4.js"><link rel="prefetch" href="/assets/js/284.5b296a3d.js"><link rel="prefetch" href="/assets/js/285.67018b71.js"><link rel="prefetch" href="/assets/js/286.a6ef00c7.js"><link rel="prefetch" href="/assets/js/287.99e52f33.js"><link rel="prefetch" href="/assets/js/288.18c31c85.js"><link rel="prefetch" href="/assets/js/289.2b552251.js"><link rel="prefetch" href="/assets/js/29.bfe31680.js"><link rel="prefetch" href="/assets/js/290.4b447987.js"><link rel="prefetch" href="/assets/js/291.3baa6247.js"><link rel="prefetch" href="/assets/js/292.8f5062ef.js"><link rel="prefetch" href="/assets/js/293.27c0a1dc.js"><link rel="prefetch" href="/assets/js/294.b0e5601c.js"><link rel="prefetch" href="/assets/js/295.f9b5b950.js"><link rel="prefetch" href="/assets/js/296.8a4a804f.js"><link rel="prefetch" href="/assets/js/297.01257458.js"><link rel="prefetch" href="/assets/js/298.4f017ceb.js"><link rel="prefetch" href="/assets/js/299.2da46571.js"><link rel="prefetch" href="/assets/js/3.65858833.js"><link rel="prefetch" href="/assets/js/30.1002dcb7.js"><link rel="prefetch" href="/assets/js/300.04bb66c3.js"><link rel="prefetch" href="/assets/js/301.9d789323.js"><link rel="prefetch" href="/assets/js/302.0905baf4.js"><link rel="prefetch" href="/assets/js/303.c6c45c69.js"><link rel="prefetch" href="/assets/js/304.00ef9abe.js"><link rel="prefetch" href="/assets/js/305.677e68b7.js"><link rel="prefetch" href="/assets/js/306.d0835ab7.js"><link rel="prefetch" href="/assets/js/307.bae3749e.js"><link rel="prefetch" href="/assets/js/308.ee85cd01.js"><link rel="prefetch" href="/assets/js/309.9d1f2a4b.js"><link rel="prefetch" href="/assets/js/31.558ae079.js"><link rel="prefetch" href="/assets/js/310.265d04c7.js"><link rel="prefetch" href="/assets/js/311.17cbe447.js"><link rel="prefetch" href="/assets/js/312.346fc5ee.js"><link rel="prefetch" href="/assets/js/313.76199886.js"><link rel="prefetch" href="/assets/js/314.d1057d8a.js"><link rel="prefetch" href="/assets/js/315.23751dda.js"><link rel="prefetch" href="/assets/js/316.d1e575c4.js"><link rel="prefetch" href="/assets/js/317.c2a8bc29.js"><link rel="prefetch" href="/assets/js/318.c547f900.js"><link rel="prefetch" href="/assets/js/319.3b387670.js"><link rel="prefetch" href="/assets/js/32.6f1977bb.js"><link rel="prefetch" href="/assets/js/320.0e4c3b38.js"><link rel="prefetch" href="/assets/js/321.6521e785.js"><link rel="prefetch" href="/assets/js/322.1f13f126.js"><link rel="prefetch" href="/assets/js/323.be785ecc.js"><link rel="prefetch" href="/assets/js/324.2d6515ef.js"><link rel="prefetch" href="/assets/js/325.0ab7f9ac.js"><link rel="prefetch" href="/assets/js/326.9b8a19a0.js"><link rel="prefetch" href="/assets/js/327.a6f2ffa3.js"><link rel="prefetch" href="/assets/js/328.ffb78689.js"><link rel="prefetch" href="/assets/js/329.caf6b6ea.js"><link rel="prefetch" href="/assets/js/33.373c3b91.js"><link rel="prefetch" href="/assets/js/330.f23dce5f.js"><link rel="prefetch" href="/assets/js/331.72924748.js"><link rel="prefetch" href="/assets/js/332.3836e7f7.js"><link rel="prefetch" href="/assets/js/333.67e7409c.js"><link rel="prefetch" href="/assets/js/334.b724e2e8.js"><link rel="prefetch" href="/assets/js/335.a3b2da56.js"><link rel="prefetch" href="/assets/js/336.2b428412.js"><link rel="prefetch" href="/assets/js/337.359508c5.js"><link rel="prefetch" href="/assets/js/338.b2326734.js"><link rel="prefetch" href="/assets/js/339.3bf7fea4.js"><link rel="prefetch" href="/assets/js/34.490080fd.js"><link rel="prefetch" href="/assets/js/340.d318bc78.js"><link rel="prefetch" href="/assets/js/341.2e4d7494.js"><link rel="prefetch" href="/assets/js/342.3dd76710.js"><link rel="prefetch" href="/assets/js/343.e06d2cd3.js"><link rel="prefetch" href="/assets/js/344.89f98670.js"><link rel="prefetch" href="/assets/js/345.ae8d10b7.js"><link rel="prefetch" href="/assets/js/346.2ca232aa.js"><link rel="prefetch" href="/assets/js/347.7093141c.js"><link rel="prefetch" href="/assets/js/348.4ded54aa.js"><link rel="prefetch" href="/assets/js/349.f2f3de7a.js"><link rel="prefetch" href="/assets/js/35.303e0d83.js"><link rel="prefetch" href="/assets/js/350.88f21b2b.js"><link rel="prefetch" href="/assets/js/352.5487b192.js"><link rel="prefetch" href="/assets/js/353.46746b90.js"><link rel="prefetch" href="/assets/js/354.44942fe7.js"><link rel="prefetch" href="/assets/js/355.c1941c58.js"><link rel="prefetch" href="/assets/js/356.08b96daf.js"><link rel="prefetch" href="/assets/js/357.61de5029.js"><link rel="prefetch" href="/assets/js/358.dd8ffb5f.js"><link rel="prefetch" href="/assets/js/359.13558983.js"><link rel="prefetch" href="/assets/js/36.a0d30943.js"><link rel="prefetch" href="/assets/js/360.2ad56070.js"><link rel="prefetch" href="/assets/js/361.3793119e.js"><link rel="prefetch" href="/assets/js/362.8f627cfe.js"><link rel="prefetch" href="/assets/js/363.47c7e111.js"><link rel="prefetch" href="/assets/js/364.1550afcc.js"><link rel="prefetch" href="/assets/js/365.8b746335.js"><link rel="prefetch" href="/assets/js/366.0b1fa772.js"><link rel="prefetch" href="/assets/js/367.ee23b98a.js"><link rel="prefetch" href="/assets/js/368.e438a39c.js"><link rel="prefetch" href="/assets/js/369.4a61dd03.js"><link rel="prefetch" href="/assets/js/37.4284cc0c.js"><link rel="prefetch" href="/assets/js/370.69adb26c.js"><link rel="prefetch" href="/assets/js/371.0192e779.js"><link rel="prefetch" href="/assets/js/372.6d850781.js"><link rel="prefetch" href="/assets/js/373.eb913a40.js"><link rel="prefetch" href="/assets/js/374.a1770de3.js"><link rel="prefetch" href="/assets/js/375.5493fcc6.js"><link rel="prefetch" href="/assets/js/376.9e13ab67.js"><link rel="prefetch" href="/assets/js/377.f9dee5a7.js"><link rel="prefetch" href="/assets/js/378.dade2491.js"><link rel="prefetch" href="/assets/js/379.707a72b7.js"><link rel="prefetch" href="/assets/js/38.a5f4c0b4.js"><link rel="prefetch" href="/assets/js/380.a754e171.js"><link rel="prefetch" href="/assets/js/381.0e200507.js"><link rel="prefetch" href="/assets/js/382.bff69b7e.js"><link rel="prefetch" href="/assets/js/383.0e26f22d.js"><link rel="prefetch" href="/assets/js/384.70cfdd5d.js"><link rel="prefetch" href="/assets/js/385.7cd56e59.js"><link rel="prefetch" href="/assets/js/386.8d8ae20c.js"><link rel="prefetch" href="/assets/js/387.017c1a90.js"><link rel="prefetch" href="/assets/js/388.003eda57.js"><link rel="prefetch" href="/assets/js/389.e9c2ebd4.js"><link rel="prefetch" href="/assets/js/39.d70df4df.js"><link rel="prefetch" href="/assets/js/390.ee4577b4.js"><link rel="prefetch" href="/assets/js/391.295ea24c.js"><link rel="prefetch" href="/assets/js/392.cd9b2c07.js"><link rel="prefetch" href="/assets/js/393.83e0324c.js"><link rel="prefetch" href="/assets/js/394.c5c6ee2a.js"><link rel="prefetch" href="/assets/js/395.5e92d62c.js"><link rel="prefetch" href="/assets/js/396.45440149.js"><link rel="prefetch" href="/assets/js/397.2e9c4d79.js"><link rel="prefetch" href="/assets/js/398.2faad846.js"><link rel="prefetch" href="/assets/js/399.d28827bb.js"><link rel="prefetch" href="/assets/js/4.be154c6d.js"><link rel="prefetch" href="/assets/js/40.0e7741b1.js"><link rel="prefetch" href="/assets/js/400.f47d0892.js"><link rel="prefetch" href="/assets/js/401.81b1faad.js"><link rel="prefetch" href="/assets/js/402.5dcee620.js"><link rel="prefetch" href="/assets/js/403.ca06d49f.js"><link rel="prefetch" href="/assets/js/404.0108fa08.js"><link rel="prefetch" href="/assets/js/405.c209c80d.js"><link rel="prefetch" href="/assets/js/406.22242ecd.js"><link rel="prefetch" href="/assets/js/407.636d72f6.js"><link rel="prefetch" href="/assets/js/408.2114030b.js"><link rel="prefetch" href="/assets/js/409.0376024e.js"><link rel="prefetch" href="/assets/js/41.12ed2989.js"><link rel="prefetch" href="/assets/js/410.1777965c.js"><link rel="prefetch" href="/assets/js/411.ef129704.js"><link rel="prefetch" href="/assets/js/412.94623570.js"><link rel="prefetch" href="/assets/js/413.ab7078ca.js"><link rel="prefetch" href="/assets/js/414.9af06b0d.js"><link rel="prefetch" href="/assets/js/415.e7de3e45.js"><link rel="prefetch" href="/assets/js/416.1a6c50b3.js"><link rel="prefetch" href="/assets/js/417.76759517.js"><link rel="prefetch" href="/assets/js/418.2dff2af0.js"><link rel="prefetch" href="/assets/js/419.4ecbfc19.js"><link rel="prefetch" href="/assets/js/42.9ce2dafa.js"><link rel="prefetch" href="/assets/js/420.7c34868f.js"><link rel="prefetch" href="/assets/js/421.538335ca.js"><link rel="prefetch" href="/assets/js/422.da47dc21.js"><link rel="prefetch" href="/assets/js/423.e3b38e9c.js"><link rel="prefetch" href="/assets/js/424.04a76082.js"><link rel="prefetch" href="/assets/js/425.419f9989.js"><link rel="prefetch" href="/assets/js/426.fffcc7ef.js"><link rel="prefetch" href="/assets/js/427.9e079a21.js"><link rel="prefetch" href="/assets/js/428.ce33c968.js"><link rel="prefetch" href="/assets/js/429.a4e784c3.js"><link rel="prefetch" href="/assets/js/43.444176d4.js"><link rel="prefetch" href="/assets/js/430.acdd537f.js"><link rel="prefetch" href="/assets/js/431.3d619af2.js"><link rel="prefetch" href="/assets/js/432.f73efd71.js"><link rel="prefetch" href="/assets/js/433.a4cfcb90.js"><link rel="prefetch" href="/assets/js/44.6b486ceb.js"><link rel="prefetch" href="/assets/js/45.2b0cc8b1.js"><link rel="prefetch" href="/assets/js/46.fd2da8aa.js"><link rel="prefetch" href="/assets/js/47.f7b70d96.js"><link rel="prefetch" href="/assets/js/48.5cc6e7e9.js"><link rel="prefetch" href="/assets/js/49.3ba51b5e.js"><link rel="prefetch" href="/assets/js/5.5aa9e0f7.js"><link rel="prefetch" href="/assets/js/50.cfb28ca0.js"><link rel="prefetch" href="/assets/js/51.1241594b.js"><link rel="prefetch" href="/assets/js/52.3fae4eef.js"><link rel="prefetch" href="/assets/js/53.553bfcb3.js"><link rel="prefetch" href="/assets/js/54.2662d576.js"><link rel="prefetch" href="/assets/js/55.94f132f1.js"><link rel="prefetch" href="/assets/js/56.c48de3a0.js"><link rel="prefetch" href="/assets/js/57.9205b377.js"><link rel="prefetch" href="/assets/js/58.618d72ce.js"><link rel="prefetch" href="/assets/js/59.bf2a8650.js"><link rel="prefetch" href="/assets/js/6.1063792f.js"><link rel="prefetch" href="/assets/js/60.2a047c47.js"><link rel="prefetch" href="/assets/js/61.d47fd11d.js"><link rel="prefetch" href="/assets/js/62.8c29dffd.js"><link rel="prefetch" href="/assets/js/63.16bb986d.js"><link rel="prefetch" href="/assets/js/64.bc64102f.js"><link rel="prefetch" href="/assets/js/65.1169c72f.js"><link rel="prefetch" href="/assets/js/66.824d09da.js"><link rel="prefetch" href="/assets/js/67.ce84321c.js"><link rel="prefetch" href="/assets/js/68.8595c270.js"><link rel="prefetch" href="/assets/js/69.89e05461.js"><link rel="prefetch" href="/assets/js/7.bccc53b9.js"><link rel="prefetch" href="/assets/js/70.8fbede4d.js"><link rel="prefetch" href="/assets/js/71.01a73ce4.js"><link rel="prefetch" href="/assets/js/72.1e0dd7f1.js"><link rel="prefetch" href="/assets/js/73.24f77f07.js"><link rel="prefetch" href="/assets/js/74.0c83a59d.js"><link rel="prefetch" href="/assets/js/75.bd6435e0.js"><link rel="prefetch" href="/assets/js/76.94a80511.js"><link rel="prefetch" href="/assets/js/77.a27d1809.js"><link rel="prefetch" href="/assets/js/78.83ab434c.js"><link rel="prefetch" href="/assets/js/79.cf8518ea.js"><link rel="prefetch" href="/assets/js/8.45f7d402.js"><link rel="prefetch" href="/assets/js/80.596962e9.js"><link rel="prefetch" href="/assets/js/81.63120495.js"><link rel="prefetch" href="/assets/js/82.21ad56f5.js"><link rel="prefetch" href="/assets/js/83.baab9377.js"><link rel="prefetch" href="/assets/js/84.f53f30b8.js"><link rel="prefetch" href="/assets/js/85.8523fba7.js"><link rel="prefetch" href="/assets/js/86.db32bca6.js"><link rel="prefetch" href="/assets/js/87.1154c1cd.js"><link rel="prefetch" href="/assets/js/88.3fe0517a.js"><link rel="prefetch" href="/assets/js/89.ba98eb57.js"><link rel="prefetch" href="/assets/js/9.84f6f752.js"><link rel="prefetch" href="/assets/js/90.7abbd7d9.js"><link rel="prefetch" href="/assets/js/91.62d46791.js"><link rel="prefetch" href="/assets/js/92.3738d8e0.js"><link rel="prefetch" href="/assets/js/93.558070f9.js"><link rel="prefetch" href="/assets/js/94.3c8015f9.js"><link rel="prefetch" href="/assets/js/95.4071db60.js"><link rel="prefetch" href="/assets/js/96.26f85934.js"><link rel="prefetch" href="/assets/js/97.5b1f6f77.js"><link rel="prefetch" href="/assets/js/98.0bd39397.js"><link rel="prefetch" href="/assets/js/99.51095dbe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.53c04193.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/favicon.ico" alt="baby sword‘s blog" class="logo"> <span class="site-name can-hide">baby sword‘s blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><a href="/javakownledge/" class="link-title">java</a> <span class="title" style="display:none;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javabasic/" class="nav-link">java基础</a></li><li class="dropdown-item"><!----> <a href="/javaadvance/" class="nav-link">java进阶</a></li></ul></div></div><div class="nav-item"><a href="/bigdata/" class="nav-link">大数据</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysqlIndex/" class="nav-link">mysql索引</a></li><li class="dropdown-subitem"><a href="/mysqllog/" class="nav-link">mysql日志</a></li></ul></li><li class="dropdown-item"><h4>redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/singleredis/" class="nav-link">单机下的redis</a></li><li class="dropdown-subitem"><a href="/mostredis/" class="nav-link">集群下的redis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常见框架" class="dropdown-title"><a href="/structure/" class="link-title">常见框架</a> <span class="title" style="display:none;">常见框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/structure/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/structure/springboot/" class="nav-link">springboot</a></li><li class="dropdown-item"><!----> <a href="/structure/RPC/" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/structure/netty/" class="nav-link">netty</a></li><li class="dropdown-item"><!----> <a href="/structure/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/structure/maven/" class="nav-link">maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/middleware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/messageQueue/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/middleware/kafka/" class="nav-link">kafka</a></li><li class="dropdown-item"><!----> <a href="/middleware/zookeeper/" class="nav-link">zookeeper</a></li><li class="dropdown-item"><!----> <a href="/middleware/rocketmq/" class="nav-link">rocketmq</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><a href="/designmode/" class="link-title">设计模式</a> <span class="title" style="display:none;">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9685d5/" class="nav-link">七大设计原则</a></li><li class="dropdown-item"><!----> <a href="/create/" class="nav-link">创建型模式</a></li><li class="dropdown-item"><!----> <a href="/structural/" class="nav-link">结构型模式</a></li><li class="dropdown-item"><!----> <a href="/action/" class="nav-link">行为型模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><a href="/microservice/" class="link-title">微服务</a> <span class="title" style="display:none;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SpringCloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/eureka/" class="nav-link">eureka</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nacos/" class="nav-link">nacos</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/computer/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/operationsystem/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作" class="dropdown-title"><a href="/work/" class="link-title">工作</a> <span class="title" style="display:none;">工作</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/privateProject/" class="nav-link">个人项目</a></li><li class="dropdown-item"><!----> <a href="/privateInterviewExperience/" class="nav-link">个人面试面经</a></li><li class="dropdown-item"><!----> <a href="/stereotypedMemory/" class="nav-link">八股记忆</a></li><li class="dropdown-item"><!----> <a href="/workAccumulation/" class="nav-link">工作积累</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b9c35f/404" class="nav-link">逻辑题</a></li><li class="dropdown-item"><h4>面试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9c35f/404" class="nav-link">百度后端实习二面</a></li></ul></li></ul></div></div> <a href="https://github.com/2290653824/myVuePressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="img/myAvator.png"> <div class="blogger-info"><h3>zhengjian</h3> <span>不敢承担失去的风险，是不可能抓住梦想的</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><a href="/javakownledge/" class="link-title">java</a> <span class="title" style="display:none;">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javabasic/" class="nav-link">java基础</a></li><li class="dropdown-item"><!----> <a href="/javaadvance/" class="nav-link">java进阶</a></li></ul></div></div><div class="nav-item"><a href="/bigdata/" class="nav-link">大数据</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysqlIndex/" class="nav-link">mysql索引</a></li><li class="dropdown-subitem"><a href="/mysqllog/" class="nav-link">mysql日志</a></li></ul></li><li class="dropdown-item"><h4>redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/singleredis/" class="nav-link">单机下的redis</a></li><li class="dropdown-subitem"><a href="/mostredis/" class="nav-link">集群下的redis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常见框架" class="dropdown-title"><a href="/structure/" class="link-title">常见框架</a> <span class="title" style="display:none;">常见框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/structure/Spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/structure/springboot/" class="nav-link">springboot</a></li><li class="dropdown-item"><!----> <a href="/structure/RPC/" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/structure/netty/" class="nav-link">netty</a></li><li class="dropdown-item"><!----> <a href="/structure/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/structure/maven/" class="nav-link">maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/middleware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/messageQueue/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/middleware/kafka/" class="nav-link">kafka</a></li><li class="dropdown-item"><!----> <a href="/middleware/zookeeper/" class="nav-link">zookeeper</a></li><li class="dropdown-item"><!----> <a href="/middleware/rocketmq/" class="nav-link">rocketmq</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><a href="/designmode/" class="link-title">设计模式</a> <span class="title" style="display:none;">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9685d5/" class="nav-link">七大设计原则</a></li><li class="dropdown-item"><!----> <a href="/create/" class="nav-link">创建型模式</a></li><li class="dropdown-item"><!----> <a href="/structural/" class="nav-link">结构型模式</a></li><li class="dropdown-item"><!----> <a href="/action/" class="nav-link">行为型模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><a href="/microservice/" class="link-title">微服务</a> <span class="title" style="display:none;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SpringCloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/eureka/" class="nav-link">eureka</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nacos/" class="nav-link">nacos</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/computer/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/operationsystem/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作" class="dropdown-title"><a href="/work/" class="link-title">工作</a> <span class="title" style="display:none;">工作</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/privateProject/" class="nav-link">个人项目</a></li><li class="dropdown-item"><!----> <a href="/privateInterviewExperience/" class="nav-link">个人面试面经</a></li><li class="dropdown-item"><!----> <a href="/stereotypedMemory/" class="nav-link">八股记忆</a></li><li class="dropdown-item"><!----> <a href="/workAccumulation/" class="nav-link">工作积累</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b9c35f/404" class="nav-link">逻辑题</a></li><li class="dropdown-item"><h4>面试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9c35f/404" class="nav-link">百度后端实习二面</a></li></ul></li></ul></div></div> <a href="https://github.com/2290653824/myVuePressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>华仔聊技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>业务设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>场景设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mac相关工具推荐</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>人工智能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>推荐</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>阅读</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计划</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>产品</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云原生</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>QVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>OpenStack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>K8S</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f9b9b5/" class="sidebar-link">扣丁狼k8s(一)</a></li><li><a href="/pages/e1255a/" class="sidebar-link">扣丁狼k8s(二)</a></li><li><a href="/pages/5e037b/" class="sidebar-link">k8s中的网络(一)</a></li><li><a href="/pages/c10d6a/" class="sidebar-link">k8s中的网络(二)</a></li><li><a href="/pages/b9c35f/" aria-current="page" class="active sidebar-link">扣丁狼k8s（三）存储与配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/b9c35f/#配置管理" class="sidebar-link">配置管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#configmap" class="sidebar-link">ConfigMap</a></li><li class="sidebar-sub-header level4"><a href="/pages/b9c35f/#创建" class="sidebar-link">创建</a></li><li class="sidebar-sub-header level4"><a href="/pages/b9c35f/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#secret" class="sidebar-link">secret</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b9c35f/#subpath" class="sidebar-link">subPath</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#配置的热更新" class="sidebar-link">配置的热更新</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#不可变的secret和condigmap" class="sidebar-link">不可变的Secret和condigmap</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b9c35f/#容器中的容器卷技术" class="sidebar-link">容器中的容器卷技术</a></li><li class="sidebar-sub-header level2"><a href="/pages/b9c35f/#nfs挂载" class="sidebar-link">NFS挂载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#不同的机器之间使用nfs" class="sidebar-link">不同的机器之间使用nfs</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#在容器中使用nfs" class="sidebar-link">在容器中使用nfs</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b9c35f/#pv和pvc" class="sidebar-link">PV和PVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#pv" class="sidebar-link">PV</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#pvc" class="sidebar-link">PVC</a></li><li class="sidebar-sub-header level3"><a href="/pages/b9c35f/#storageclass" class="sidebar-link">storageClass</a></li></ul></li></ul></li><li><a href="/pages/4f83cd/" class="sidebar-link">k8s高级调度</a></li><li><a href="/pages/a00518/" class="sidebar-link">k8s分享</a></li><li><a href="/pages/46fb80/" class="sidebar-link">常用命令</a></li><li><a href="/pages/978df2/" class="sidebar-link">k8s集群搭建</a></li><li><a href="/pages/b65d4a/" class="sidebar-link">搭建过程bug记录</a></li><li><a href="/pages/f6f3bb/" class="sidebar-link">什么是k8s的CRD</a></li><li><a href="/pages/b531d0/" class="sidebar-link">OpenStack Kubernetes kubevirt</a></li><li><a href="/pages/170da1/" class="sidebar-link">k8s-go-client</a></li><li><a href="/pages/8e312f/" class="sidebar-link">kubeconfig详解</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>kubevirt</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件设计师</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>极客时间</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单元测试</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/other/#其他" data-v-06225672>其他</a></li><li data-v-06225672><a href="/other/#QVM" data-v-06225672>QVM</a></li><li data-v-06225672><a href="/other/#K8S" data-v-06225672>K8S</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/xugaoyi" target="_blank" title="作者" class="beLink" data-v-06225672>xugaoyi</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-09-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">扣丁狼k8s（三）存储与配置<!----></h1>  <div class="theme-vdoing-content content__default"><p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904093356552.png" alt="image-20230904093356552"></p> <h2 id="配置管理"><a href="#配置管理" class="header-anchor">#</a> 配置管理</h2> <h3 id="configmap"><a href="#configmap" class="header-anchor">#</a> ConfigMap</h3> <h4 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h4> <p>例如我们先创建一个配置文件db.properties</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">username</span><span class="token operator">=</span>root
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Redis.properties</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">6379</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span>localhost
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>将上面的两个文件放到同一个test/中</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/yamlPackage/configMap/test<span class="token comment"># ls</span>
mysql.properties  redis.properties
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>kubectl create configmap &lt;configname&gt; --from-file=&lt;dirpath&gt;</code> 基于文件夹进行创建</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl create cm mytestconfig --from-file=test/</span>
configmap/mytestconfig created
root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl get cm</span>
NAME               DATA   AGE
kube-root-ca.crt   <span class="token number">1</span>      37h
mytestconfig       <span class="token number">2</span>      5s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>查看详细信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl describe cm mytestconfig</span>
Name:         mytestconfig
Namespace:    default
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

Data
<span class="token operator">==</span><span class="token operator">==</span>
redis.properties:
----
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">6379</span>

mysql.properties:
----
<span class="token assign-left variable">username</span><span class="token operator">=</span>root
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>


BinaryData
<span class="token operator">==</span><span class="token operator">==</span>

Events:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>从上面可以看到我们具体设置的信息，通过文件夹的方式，将某个文件夹下面所有的文件的写进了配置</p> <ul><li><code>kubectl create cm &lt;cnname&gt; --from-file=key1=filepath --from-file=key2=filepath</code>基于文件进行创建【key如果不指定，默认使用文件的名字】</li></ul> <p>我们创建一个配置文件application.yaml</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>spring:
	application:
	  name: <span class="token builtin class-name">test</span>
server:
	port: <span class="token number">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl create cm spring-yaml --from-file=application.yaml=test/spring.yaml</span>
configmap/spring-yaml created
root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl get cm</span>
NAME               DATA   AGE
kube-root-ca.crt   <span class="token number">1</span>      37h
mytestconfig       <span class="token number">2</span>      12m
spring-yaml        <span class="token number">1</span>      6s
root@openstackTest-1:~/yamlPackage/configMap<span class="token comment"># kubectl describe cm spring-yaml</span>
Name:         spring-yaml
Namespace:    default
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

Data
<span class="token operator">==</span><span class="token operator">==</span>
application.yaml:
----
spring:
  application:
    name: <span class="token builtin class-name">test</span>
server:
  port: <span class="token number">8080</span>


BinaryData
<span class="token operator">==</span><span class="token operator">==</span>

Events:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li><code>kubectl create cm &lt;cmname&gt; --from-literal=key1=config1 --from-literal=key2=config2</code></li></ul> <p>当参数比较少时，可以用这个方法</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/k8s1<span class="token comment"># kubectl create cm keyvalueconfig --from-literal=key1=value1 --from-literal=key2=value2</span>
configmap/keyvalueconfig created
root@openstackTest-1:~/k8s1<span class="token comment"># kubectl get cm keyvalueconfig</span>
NAME             DATA   AGE
keyvalueconfig   <span class="token number">2</span>      14s
root@openstackTest-1:~/k8s1<span class="token comment"># kubectl describe cm keyvalueconfig</span>
Name:         keyvalueconfig
Namespace:    default
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

Data
<span class="token operator">==</span><span class="token operator">==</span>
key2:
----
value2
key1:
----
value1

BinaryData
<span class="token operator">==</span><span class="token operator">==</span>

Events:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <p>首先我们先创建一个我们想要使用的配置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>kubectl create cm test-env-config --from-literal<span class="token operator">=</span>JAVA_OPTS_TEST<span class="token operator">=</span><span class="token string">'-Xms512m -Xmx512m'</span> --from-literal<span class="token operator">=</span>APP_NAEM<span class="token operator">=</span>springboot-test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1:~/k8s1<span class="token comment"># kubectl create cm test-env-config --from-literal=JAVA_OPTS_TEST='-Xms512m -Xmx512m' --from-literal=APP_NAEM=springboot-test</span>
configmap/test-env-config created
root@openstackTest-1:~/k8s1<span class="token comment"># kubectl describe cm test-env-config</span>
Name:         test-env-config
Namespace:    default
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

Data
<span class="token operator">==</span><span class="token operator">==</span>
APP_NAEM:
----
springboot-test
JAVA_OPTS_TEST:
----
<span class="token parameter variable">-Xms512m</span> <span class="token parameter variable">-Xmx512m</span>

BinaryData
<span class="token operator">==</span><span class="token operator">==</span>

Events:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>实现在容器中打印出对应的配置</p> <ul><li>创建我们对应的一个容器</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>env<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> Never
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> env<span class="token punctuation">-</span>test
      <span class="token key atrule">image</span><span class="token punctuation">:</span> alpine
      <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/bin/sh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;env;sleep 3600&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
      <span class="token key atrule">env</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> JAVA_VM_OPTS
        <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
          <span class="token key atrule">configMapKeyRef</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>env<span class="token punctuation">-</span>config
            <span class="token key atrule">key</span><span class="token punctuation">:</span> JAVA_OPTS_TEST
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> APP
        <span class="token key atrule">valueFrom</span><span class="token punctuation">:</span>
          <span class="token key atrule">configMapKeyRef</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>env<span class="token punctuation">-</span>config
            <span class="token key atrule">key</span><span class="token punctuation">:</span> APP_NAME
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>我们使用命令查看容器的日志：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>root@openstackTest-1 ~/y/pod<span class="token comment"># kubectl logs -f test-env-pod</span>
<span class="token assign-left variable">KUBERNETES_PORT</span><span class="token operator">=</span>tcp://10.96.0.1:443
<span class="token assign-left variable">KUBERNETES_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>test-env-pod
<span class="token assign-left variable"><span class="token environment constant">SHLVL</span></span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/root
<span class="token assign-left variable">NGINX_SERVICE_PORT_80_TCP</span><span class="token operator">=</span>tcp://10.98.194.204:80
<span class="token assign-left variable">JAVA_VM_OPTS</span><span class="token operator">=</span>-Xms512m <span class="token parameter variable">-Xmx512m</span>
<span class="token assign-left variable">APP</span><span class="token operator">=</span>springboot-test
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_ADDR</span><span class="token operator">=</span><span class="token number">10.96</span>.0.1
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
<span class="token assign-left variable">NGINX_SERVICE_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.98</span>.194.204
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_PORT</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP_PROTO</span><span class="token operator">=</span>tcp
<span class="token assign-left variable">NGINX_SERVICE_SERVICE_PORT</span><span class="token operator">=</span><span class="token number">80</span>
<span class="token assign-left variable">NGINX_SERVICE_PORT</span><span class="token operator">=</span>tcp://10.98.194.204:80
<span class="token assign-left variable">KUBERNETES_SERVICE_PORT_HTTPS</span><span class="token operator">=</span><span class="token number">443</span>
<span class="token assign-left variable">KUBERNETES_PORT_443_TCP</span><span class="token operator">=</span>tcp://10.96.0.1:443
<span class="token assign-left variable">KUBERNETES_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.96</span>.0.1
<span class="token assign-left variable"><span class="token environment constant">PWD</span></span><span class="token operator">=</span>/
<span class="token assign-left variable">NGINX_SERVICE_PORT_80_TCP_ADDR</span><span class="token operator">=</span><span class="token number">10.98</span>.194.204
<span class="token assign-left variable">NGINX_SERVICE_PORT_80_TCP_PORT</span><span class="token operator">=</span><span class="token number">80</span>
<span class="token assign-left variable">NGINX_SERVICE_PORT_80_TCP_PROTO</span><span class="token operator">=</span>tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>可以看到这个容器确实拿到了我们的对应的数据了。</p> <p>另一种配置的方式,通过挂载的方式将某个配置文件加载到容器中</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>apiVersion: v1
kind: Pod
metadata:
  name: test-env-pod
spec:
  restartPolicy: Never
  containers:
    - name: env-test
      image: alpine
      command: <span class="token punctuation">[</span><span class="token string">&quot;/bin/sh&quot;</span>,<span class="token string">&quot;-c&quot;</span>,<span class="token string">&quot;env;sleep 3600&quot;</span><span class="token punctuation">]</span>
      imagePullPolicy: IfNotPresent
      env:
      - name: JAVA_VM_OPTS
        valueFrom:
          configMapKeyRef:
            name: test-env-config
            key: JAVA_OPTS_TEST
      - name: APP
        valueFrom:
          configMapKeyRef:
            name: test-env-config
            key: APP_NAME
			volumeMounts:
			- name: db-config
			  mountPath: <span class="token string">&quot;/usr/local/mysql/conf&quot;</span>
			  readOnly: <span class="token boolean">true</span>
	volumes: 
	  - name: db-config
	    configMap:
	      name: test-dir-config
	      items:
	      - key: <span class="token string">&quot;db.properties&quot;</span>
	        path: <span class="token string">&quot;db.properties&quot;</span>
	restartPolicy: Never
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><blockquote><ol><li><p><code>metadata</code>: 这是用于定义 Pod 元数据的部分。</p> <ul><li><code>name: test-env-pod</code>: 这里定义了 Pod 的名称。</li></ul></li> <li><p><code>spec</code>: 这是用于定义 Pod 规范的部分。</p> <ul><li><p><code>restartPolicy: Never</code>: 这表示 Pod 的重启策略是 &quot;Never&quot;，即不会自动重启。一旦容器退出，它将永远保持在非运行状态。</p></li> <li><p><code>containers</code>: 这是一个容器列表，这里定义了一个容器。</p> <ul><li><code>name: env-test</code>: 容器的名称是 &quot;env-test&quot;。</li> <li><code>image: alpine</code>: 使用 Alpine Linux 镜像作为容器的基础镜像。</li> <li><code>command</code>: 定义容器启动时执行的命令。在这里，容器将打印环境变量 (<code>env</code>) 的内容，并然后休眠 3600 秒。</li> <li><code>imagePullPolicy: IfNotPresent</code>: 这表示如果本地没有这个容器镜像，才从远程仓库拉取，否则使用本地镜像。</li></ul></li> <li><p><code>env</code>: 这里定义了容器的环境变量。</p> <ul><li><p><code>name: JAVA_VM_OPTS</code>: 环境变量的名称是 &quot;JAVA_VM_OPTS&quot;。</p></li> <li><div class="language- line-numbers-mode"><pre class="language-text"><code>valueFrom
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 这表示环境变量的值来自于其他资源。</p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>configMapKeyRef
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 环境变量的值是从 ConfigMap 中获取的。</p> <ul><li><code>name: test-env-config</code>: 这是 ConfigMap 的名称。</li> <li><code>key: JAVA_OPTS_TEST</code>: 这是 ConfigMap 中的键，它的值将赋给 &quot;JAVA_VM_OPTS&quot; 变量。</li></ul></li></ul></li> <li><p><code>name: APP</code>: 另一个环境变量的名称是 &quot;APP&quot;。</p></li> <li><div class="language- line-numbers-mode"><pre class="language-text"><code>valueFrom
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 同样，这个环境变量的值也来自于 ConfigMap。</p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>configMapKeyRef
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 它引用了同一个 ConfigMap，但使用了不同的键。</p> <ul><li><code>name: test-env-config</code>: 这是相同的 ConfigMap。</li> <li><code>key: APP_NAME</code>: 这是不同的键，其值将赋给 &quot;APP&quot; 变量。</li></ul></li></ul></li></ul></li> <li><p><code>volumes</code>: 这是一个用于定义卷的部分，这里定义了一个卷。</p> <ul><li><p><code>name: db-config</code>: 卷的名称是 &quot;db-config&quot;。</p></li> <li><div class="language- line-numbers-mode"><pre class="language-text"><code>configMap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 这表示这个卷是一个 ConfigMap 类型的卷。</p> <ul><li><p><code>name: test-dir-config</code>: 这是 ConfigMap 的名称，它将被挂载到容器中。</p></li> <li><div class="language- line-numbers-mode"><pre class="language-text"><code>items
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>: 这里定义了 ConfigMap 中的哪些键值对将被挂载到容器中。</p> <ul><li><code>key: &quot;db.properties&quot;</code>: 这是 ConfigMap 中的键。</li> <li><code>path: &quot;db.properties&quot;</code>: 这是挂载到容器中的路径。</li></ul></li></ul></li></ul></li> <li><p>最后的 <code>restartPolicy: Never</code> 与之前的相同，表示 Pod 的重启策略是 &quot;Never&quot;，容器退出后不会自动重启。</p></li></ul></li></ol></blockquote> <h3 id="secret"><a href="#secret" class="header-anchor">#</a> secret</h3> <p>主要是可以配置一些加密的信息，不过这个加密是base64，加密性不高</p> <p>创建方式和secret差不多</p> <p>例如：</p> <p><code>kubectl create secret generic orig-secret --from-literal=username=admin --from-literal=password=ds@!3-/</code></p> <p>上面创建语句没有问题，但是<code>ds@!3-/</code>这种有特殊字符的数据进行创建，可能会出现一些特殊的问题，导致我们保存的数据不是我们实际想要的数据</p> <p>更多用在docker私有仓库等。</p> <h2 id="subpath"><a href="#subpath" class="header-anchor">#</a> subPath</h2> <blockquote><p><code>subPath</code> 是 Kubernetes 中用于挂载卷内部文件或目录到容器的特定路径的设置。它通常在 Pod 的 <code>volumes</code> 和容器的 <code>volumeMounts</code> 中使用。</p> <p>假设你有一个卷（例如 ConfigMap 或者 Secret），其中包含多个文件或目录，而你只想将其中的一部分挂载到容器内的特定路径，你可以使用 <code>subPath</code> 来实现这一点。</p> <p>下面是一个示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yamlCopy code
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: my-image
    volumeMounts:
    - name: my-volume
      mountPath: /path/in/container
      subPath: my-file.txt
  volumes:
  - name: my-volume
    configMap:
      name: my-configmap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在这个示例中，我们有一个 Pod，其中包含一个容器（<code>my-container</code>）和一个卷（<code>my-volume</code>），卷使用了 ConfigMap（<code>my-configmap</code>）。我们希望将 ConfigMap 中的 <code>my-file.txt</code> 文件挂载到容器中的 <code>/path/in/container</code> 路径上。这就是通过在容器的 <code>volumeMounts</code> 中使用 <code>subPath</code> 来实现的。这将只挂载 ConfigMap 中的 <code>my-file.txt</code> 文件到指定路径，而不是整个 ConfigMap。</p> <p>这在某些情况下非常有用，因为你可以选择性地将卷的特定部分挂载到容器中，而不必将整个卷都挂载进来。</p></blockquote> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904143721193.png" alt="image-20230904143721193"></p> <p>意思就是将我们configMap中的的nginx.conf个文件挂在到容器中/etc/nginx/的目录下。但是这里有一个关键点，挂在时，如果容器中对应的目录存在则覆盖，不存在则新建，这样会导致我们所有的nginx的该目录下原本的文件消失，我们是不想要这样的。</p> <p>这个时候，我们就要使用到subpath这个概念。</p> <ul><li>定义volumes时，需要增加items属性，配置key和path，且path的值不能从/开始</li> <li>在容器内的volumeMounts中增加subpath属性，该值与volumes中的items.path的值相同</li></ul> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904145206474.png" alt="image-20230904145206474"></p> <h3 id="配置的热更新"><a href="#配置的热更新" class="header-anchor">#</a> 配置的热更新</h3> <p>我们通常将配置文件作为configmap然后挂载到pod，那么如果更新configmap中汇的配置，会不会更新到pod中呢？</p> <p>默认方式：会更新，更新周期是更新时间+缓存时间</p> <p>subpath: 不会更新</p> <p>变量形式： 如果pod中的一个变量从condigmap或者secret中得到，同样也不会更新的</p> <p>对于subpath方式，我们可以取消subpath的使用，将配置文件挂载到一个不存在的目录，避免目录的覆盖，然后利用软链接的形式，将文件链接到目标位置</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904151614412.png" alt="image-20230904151614412"></p> <p>更新方式：</p> <ul><li>通过edit命令直接修改configmap</li> <li>通过replace替换</li></ul> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904152012060.png" alt="image-20230904152012060"></p> <h3 id="不可变的secret和condigmap"><a href="#不可变的secret和condigmap" class="header-anchor">#</a> 不可变的Secret和condigmap</h3> <p>一些线上的配置文件，我们并不想改变，更具有稳定性</p> <p>对于一些敏感服务的配置文件，在线上有时是不允许修改的，此时在配置configmap时可以设置immutable:true来禁止修改</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904152838042.png" alt="image-20230904152838042"></p> <h2 id="容器中的容器卷技术"><a href="#容器中的容器卷技术" class="header-anchor">#</a> 容器中的容器卷技术</h2> <ol><li><p><strong>空白目录（EmptyDir）卷示例：</strong></p> <p>主要目的不是为了持久化，而是为了管理一个pod上面有多个容器的情况</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904154439331.png" alt="image-20230904154439331"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:1.19
    volumeMounts:
    - name: my-volume
      mountPath: /data
  volumes:
  - name: my-volume
    emptyDir: {}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p><strong>主机路径（HostPath）卷示例：</strong></p> <blockquote><p>将节点上的文件或目录挂在到pod上，此时该目录会变成持久化存储目录，即使pod被删除后重启，也可以重新加载到该目录，该目录下的文件不会丢失</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:1.19
    volumeMounts:
    - name: my-volume
      mountPath: /data
  volumes:
  - name: my-volume
    hostPath:
      path: /path/on/host
      type: Directory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904153608701.png" alt="image-20230904153608701"></p></li></ol> <p>需要注意的是，我们创建了一个挂载的容器后，我们首先需要知道这个容器挂在到了哪个node节点，对应的node节点上的主机目录才是对应的挂在目录</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904155052921.png" alt="image-20230904155052921"></p> <p>如何进入到一个pod中的指定的一个容器：</p> <p><code>kubectl exec -it empty-dir-pod -c nginx-emptydir1 -- sh</code></p> <p>可以进入到两个容器中，在对应的目录查看文件的共享</p> <p>没有持久化的能力，pod被删除，对应的数据最终也会被删除</p> <ol><li><p><strong>持久卷声明（PersistentVolumeClaim）示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:1.19
    volumeMounts:
    - name: my-volume
      mountPath: /data
  volumes:
  - name: my-volume
    persistentVolumeClaim:
      claimName: my-pvc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p><strong>配置映射（ConfigMap）卷示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:1.19
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: my-config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p><strong>密钥和证书卷示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: nginx:1.19
    volumeMounts:
    - name: tls-volume
      mountPath: /etc/tls
  volumes:
  - name: tls-volume
    secret:
      secretName: my-tls-secret
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ol> <p>这些示例演示了不同类型的容器卷配置，包括空白目录卷、主机路径卷、持久卷声明、配置映射卷以及密钥和证书卷。你可以根据需要选择适当的卷类型并根据你的应用程序要求进行配置。</p> <h2 id="nfs挂载"><a href="#nfs挂载" class="header-anchor">#</a> NFS挂载</h2> <h3 id="不同的机器之间使用nfs"><a href="#不同的机器之间使用nfs" class="header-anchor">#</a> 不同的机器之间使用nfs</h3> <p>nfs卷能将NFS（网络文件系统）挂在到你的pod中，不像empty那样会被删除pod的同时也会删除，nfs卷的内容在pod被删除时会被保存，卷只是被卸载。这意味着nfs卷可以被预先填充数据，并且这些数据可以在pod之间共享</p> <p>因为会存在网络通信，所以不建议存储在频繁读写的情况，例如不适用于mysql。</p> <p>参考: <a href="https://www.cnblogs.com/Andya/p/14760281.html" target="_blank" rel="noopener noreferrer">安装和原理教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>下载nfs-server，<code>apt install nfs-server</code></p> <p>选定一台机器作为服务器，创建目录<code>/nfs/ro</code>和<code>/nfs/rw</code></p> <p>配置文件<code>/etc/exports</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>/nfs/rw <span class="token number">10.10</span>.10.0/24<span class="token punctuation">(</span>rw,sync,no_subtree_check,no_root_squash<span class="token punctuation">)</span>
/nfs/ro <span class="token number">10.10</span>.10.0/24<span class="token punctuation">(</span>ro,sync,no_subtree_check,no_root_squash<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意上面的配置，只有对应网段的的机器才可以挂载到这里</p> <p>重新加载nfs配置<code>exportfs -f</code></p> <p>重启服务<code>systemctl reload nfs-server</code></p> <p>可以在ro当中写一个文件，便于等会在客户端查看</p> <p>在客户端安装好<code>nfs-utils</code></p> <p><code>apt install nfs-common</code></p> <p>在客户端创建一个用于挂载的目录：<code>mkdir -p /mnt/nfs/rw/</code></p> <p>挂载：<code>mount -t nfs 10.10.10.7:/nfs/rw /mnt/nfs/rw</code></p> <p>挂载后查看对应的目录发现有可用的文件</p> <h3 id="在容器中使用nfs"><a href="#在容器中使用nfs" class="header-anchor">#</a> 在容器中使用nfs</h3> <p>同样是通过volume配置的方式进行运用</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904174456434.png" alt="image-20230904174456434"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>apiVersion: v1
kind: pod
metadata:
  name: nfs-test-pod1
spec:
  containers:
  - image: nginx
    name: test-container
    volumeMount:
    - mountPath: /usr/share/nginx/html
      name: test-volume
  volumes:
  - name: test-volume
    nfs: 
      server: <span class="token number">10.10</span>.10.7
      path: /nfs/rw
      readOnly: <span class="token boolean">false</span>
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>curl podip</code>可以看到返回对应的内容</p> <p>当我们删除掉这两个pod后，nfs服务器上的资源还是存在的</p> <h2 id="pv和pvc"><a href="#pv和pvc" class="header-anchor">#</a> PV和PVC</h2> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904180137431.png" alt="image-20230904180137431"></p> <p>为了解决远程存储的不统一</p> <p>PV就是对其做一个抽象，屏蔽其底层的细节。</p> <p>PVC用于描写每个pod服务需要多少的数据资源</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904180748017.png" alt="image-20230904180748017"></p> <h3 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h3> <p><strong>构建</strong></p> <ul><li>静态构建</li></ul> <p>集群管理员创建若干pv卷，这些卷对象带有真实存储的细节信息，并且对集群用户可见，pv卷存在于k8s api中，可以供用户消费</p> <ul><li>动态构建</li></ul> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904181202351.png" alt="image-20230904181202351"></p> <p><strong>绑定</strong></p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904181424050.png" alt="image-20230904181424050"></p> <p><strong>使用</strong></p> <p>pod与pvc关联</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904181458505.png" alt="image-20230904181458505"></p> <p><strong>回收策略</strong></p> <ul><li>Retain</li> <li>delete</li> <li>recycle</li></ul> <h3 id="pv"><a href="#pv" class="header-anchor">#</a> PV</h3> <p>配置文件</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904182042073.png" alt="image-20230904182042073"></p> <p>pv的状态</p> <p>available 空闲：未被绑定</p> <p>bound 已被pvc绑定</p> <p>released：PVC被删除，资源已回收，但是被PV未被重新使用</p> <p>Failed: 自动回收失败</p> <h3 id="pvc"><a href="#pvc" class="header-anchor">#</a> PVC</h3> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904183110866.png" alt="image-20230904183110866"></p> <p>创建后，看pvc就可以看到bound状态</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904183155770.png" alt="image-20230904183155770"></p> <p>最后我们再来绑定pod</p> <p><img src="https://2290653824-github-io.oss-cn-hangzhou.aliyuncs.com/image-20230904183349258.png" alt="image-20230904183349258"></p> <h3 id="storageclass"><a href="#storageclass" class="header-anchor">#</a> storageClass</h3></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/2290653824/myVuePressBlog/edit/master/docs/90.其他/110.QVM/3.K8S/30.扣丁狼k8s（三）存储与配置.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/02/22, 14:03:19</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c10d6a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">k8s中的网络(二)</div></a> <a href="/pages/4f83cd/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">k8s高级调度</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c10d6a/" class="prev">k8s中的网络(二)</a></span> <span class="next"><a href="/pages/4f83cd/">k8s高级调度</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/e837ca/"><div>
            spark基础
            <!----></div></a> <span class="date">02-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/41416f/"><div>
            mysql读写分离和分库分表
            <!----></div></a> <span class="date">02-22</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/c19608/"><div>
            数据库迁移
            <!----></div></a> <span class="date">02-22</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="2290653824@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/2290653824" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=430175831" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.7d33bb02.js" defer></script><script src="/assets/js/2.15f2967d.js" defer></script><script src="/assets/js/351.df3bf6ec.js" defer></script>
  </body>
</html>
